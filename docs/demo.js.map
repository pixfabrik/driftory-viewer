{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@dan503/load-js/index.js","src/demo/demo.ts","src/library/driftory.ts","src/library/openseadragon.types.ts"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar alreadyCalledScripts = [];\r\nvar allScripts = {};\r\nvar defaultScript = { hasLoaded: false, callbacks: [] };\r\nvar addCallback = function (src, callback) {\r\n    var script = allScripts[src];\r\n    if (!script)\r\n        return;\r\n    if (script.hasLoaded) {\r\n        // If the script has already been previously loaded, just run the callback immediately\r\n        callback();\r\n    }\r\n    else {\r\n        if (script.callbacks.length > 0) {\r\n            script.callbacks.push(callback);\r\n        }\r\n        else {\r\n            script.callbacks = [callback];\r\n        }\r\n    }\r\n};\r\nfunction loadJS(src, callback) {\r\n    var script = allScripts[src] || defaultScript;\r\n    allScripts[src] = script;\r\n    if (alreadyCalledScripts.indexOf(src) < 0) {\r\n        alreadyCalledScripts.push(src);\r\n        var $scriptElem = document.createElement('script');\r\n        $scriptElem.setAttribute('class', 'load-js-script');\r\n        $scriptElem.src = src;\r\n        $scriptElem.onload = function () {\r\n            addCallback(src, callback);\r\n            var updatedScript = allScripts[src];\r\n            if (updatedScript) {\r\n                updatedScript.hasLoaded = true;\r\n            }\r\n            for (var thisSource in allScripts) {\r\n                var thisScript = allScripts[thisSource] || defaultScript;\r\n                thisScript.callbacks.forEach(function (cb) { return cb(); });\r\n            }\r\n        };\r\n        document.head.appendChild($scriptElem);\r\n    }\r\n    else {\r\n        addCallback(src, callback);\r\n    }\r\n}\r\nexports.default = loadJS;\r\n","import Driftory from '../library/driftory';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const container = document.querySelector('.driftory-viewer-container') as HTMLDivElement | null;\n  const startButton = document.querySelector('.start-button');\n  const endButton = document.querySelector('.end-button');\n  const previousButton = document.querySelector('.previous-button');\n  const nextButton = document.querySelector('.next-button');\n  const hideButton = document.querySelector('.hide-button');\n  const frameInfo = document.querySelector('.frame-info');\n\n  if (!container) {\n    console.error('Cannot find viewer container');\n    return;\n  }\n\n  const driftory = new Driftory({\n    container,\n    prefixUrl: 'https://cdn.jsdelivr.net/npm/openseadragon@2.4/build/openseadragon/images/',\n    onComicLoad: () => {\n      console.log('loaded!');\n    },\n    onFrameChange: ({ frameIndex = 0, isLastFrame }) => {\n      if (frameInfo) {\n        let text = `Frame ${frameIndex + 1}`;\n        if (isLastFrame) {\n          text += ' (last frame!)';\n        }\n\n        frameInfo.textContent = text;\n      }\n    },\n    onEnd: () => {\n      console.log('User trying to go past end');\n    }\n  });\n\n  startButton?.addEventListener('click', () => {\n    driftory.goToFrame(0);\n  });\n\n  endButton?.addEventListener('click', () => {\n    driftory.goToFrame(driftory.getFrameCount() - 1);\n  });\n\n  previousButton?.addEventListener('click', () => {\n    driftory.goToPreviousFrame();\n  });\n\n  nextButton?.addEventListener('click', () => {\n    driftory.goToNextFrame();\n  });\n\n  hideButton?.addEventListener('click', () => {\n    container.classList.toggle('hide');\n  });\n\n  // const comicName = 'comic2.json';\n  const comicName = 'comic.json';\n  fetch(comicName)\n    .then((response) => {\n      if (!response.ok) {\n        console.error(response);\n        throw new Error('Failed to load ' + comicName);\n      }\n\n      return response.json();\n    })\n    .then((json) => {\n      // console.log(json);\n      driftory.openComic(json);\n    })\n    .catch((error) => console.error(error));\n});\n","import loadJs from '@dan503/load-js';\nimport { Comic } from './Comic.types';\nexport * from './Comic.types';\nexport * from './openseadragon.types';\nimport { OpenSeadragonType, ViewerType } from './openseadragon.types';\n\ninterface OsdRequest {\n  resolve: (value?: unknown) => void;\n  reject: (reason?: any) => void;\n}\n\nlet OpenSeadragon: OpenSeadragonType | undefined;\nlet osdRequest: OsdRequest | undefined;\n\ndeclare global {\n  interface Window {\n    OpenSeadragon: OpenSeadragonType;\n  }\n}\n\nconst osdPromise = new Promise((resolve, reject) => {\n  osdRequest = { resolve, reject };\n});\n\ninterface ImageItem {\n  hideUntilFrame?: number;\n  tiledImage?: OpenSeadragon.TiledImage;\n}\n\ntype Frame = OpenSeadragon.Rect;\ntype Container = HTMLElement;\ntype OnFrameChange = (params: { frameIndex: number; isLastFrame: boolean }) => void;\ntype OnComicLoad = (params: {}) => void;\ntype OnEnd = (params: {}) => void;\n\ninterface DriftoryArguments {\n  container: Container;\n  OpenSeadragon?: OpenSeadragonType;\n  onFrameChange?: OnFrameChange;\n  onComicLoad?: OnComicLoad;\n  onEnd?: OnEnd;\n  prefixUrl?: string;\n}\n\nexport default class Driftory {\n  container: Container;\n  onFrameChange: OnFrameChange;\n  onComicLoad: OnComicLoad;\n  onEnd: OnEnd;\n  imageItems: Array<ImageItem> = [];\n  frames: Array<Frame> = [];\n  frameIndex: number = -1;\n  lastScrollTime: number = 0;\n  scrollDelay: number = 2000;\n  viewer?: ViewerType;\n\n  // ----------\n  constructor(args: DriftoryArguments) {\n    this.container = args.container;\n    this.onFrameChange = args.onFrameChange || function () {};\n    this.onComicLoad = args.onComicLoad || function () {};\n    this.onEnd = args.onEnd || function () {};\n\n    if (args.OpenSeadragon) {\n      OpenSeadragon = args.OpenSeadragon;\n      this._initialize(args);\n      osdRequest?.resolve();\n    } else {\n      // Note: loadJs only loads the file once, even if called multiple times, and always makes sure\n      // all of the callbacks are called.\n      loadJs(\n        'https://cdn.jsdelivr.net/npm/openseadragon@2.4/build/openseadragon/openseadragon.min.js',\n        () => {\n          OpenSeadragon = window.OpenSeadragon;\n          this._initialize(args);\n          osdRequest?.resolve();\n        }\n      );\n    }\n  }\n\n  // ----------\n  _initialize({ container, prefixUrl }: DriftoryArguments) {\n    this.viewer =\n      OpenSeadragon &&\n      OpenSeadragon({\n        element: container,\n        prefixUrl: prefixUrl,\n        showNavigationControl: false,\n        maxZoomPixelRatio: 10,\n        gestureSettingsMouse: {\n          clickToZoom: false\n        }\n      });\n\n    if (this.viewer) {\n      this.viewer.addHandler('canvas-click', (event) => {\n        if (!event || !event.quick || !event.position || !this.viewer) {\n          return;\n        }\n\n        const point = this.viewer.viewport.pointFromPixel(event.position);\n        let foundIndex = this._getHitFrame(point);\n        if (foundIndex === -1) {\n          const realFrameIndex = this._figureFrameIndex(true);\n          if (realFrameIndex === -1 && this.frameIndex !== undefined) {\n            this.goToFrame(this.frameIndex);\n          } else {\n            this.goToNextFrame();\n          }\n        } else if (foundIndex === this.frameIndex) {\n          this.goToNextFrame();\n        } else {\n          this.goToFrame(foundIndex);\n        }\n      });\n\n      const originalScrollHandler = this.viewer.innerTracker.scrollHandler;\n      this.viewer.innerTracker.scrollHandler = (event) => {\n        if (\n          event.originalEvent.ctrlKey ||\n          event.originalEvent.altKey ||\n          event.originalEvent.metaKey\n        ) {\n          return originalScrollHandler.call(this.viewer?.innerTracker, event);\n        }\n\n        const now = Date.now();\n        // console.log(event.scroll, now, now - this.lastScrollTime);\n        if (now - this.lastScrollTime < this.scrollDelay) {\n          // Returning false stops the browser from scrolling itself.\n          return false;\n        }\n\n        this.lastScrollTime = now;\n        if (event.scroll < 0) {\n          this.goToNextFrame();\n        } else {\n          this.goToPreviousFrame();\n        }\n\n        // Returning false stops the browser from scrolling itself.\n        return false;\n      };\n\n      window.addEventListener('keydown', (event) => {\n        if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n          return;\n        }\n\n        if (event.key === 'ArrowRight' || event.key === 'ArrowDown' || event.key === ' ') {\n          this.goToNextFrame();\n        } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {\n          this.goToPreviousFrame();\n        } else {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    }\n  }\n\n  openComic(unsafeComic: Comic | string) {\n    if (this.frames.length || this.imageItems.length) {\n      console.error(\n        'Currently the Driftory viewer is not set up to load a second comic after the first.'\n      );\n\n      return;\n    }\n\n    const { comic } =\n      typeof unsafeComic === 'string' ? (JSON.parse(unsafeComic) as Comic) : unsafeComic;\n\n    osdPromise.then(() => {\n      this.container.style.backgroundColor = comic.body.backgroundColor;\n\n      if (this.viewer) {\n        if (comic.body.frames) {\n          this.frames = comic.body.frames.map((frame) => {\n            return new OpenSeadragon!.Rect(\n              frame.x - frame.width / 2,\n              frame.y - frame.height / 2,\n              frame.width,\n              frame.height\n            );\n          });\n        } else {\n          this.frames = comic.body.items.map((item) => {\n            return new OpenSeadragon!.Rect(\n              item.x - item.width / 2,\n              item.y - item.height / 2,\n              item.width,\n              item.height\n            );\n          });\n        }\n\n        comic.body.items.forEach((item, i) => {\n          const imageItem: ImageItem = {\n            hideUntilFrame: item.hideUntilFrame\n          };\n\n          this.imageItems.push(imageItem);\n\n          this.viewer?.addTiledImage({\n            preload: true,\n            x: item.x - item.width / 2,\n            y: item.y - item.height / 2,\n            width: item.width,\n            success: (event: any) => {\n              imageItem.tiledImage = event.item as OpenSeadragon.TiledImage;\n              this._updateImageVisibility();\n\n              if (i === 0) {\n                this._startComic();\n              }\n            },\n            tileSource: {\n              type: 'legacy-image-pyramid',\n              levels: [\n                {\n                  url: item.url,\n                  width: item.width,\n                  height: item.height\n                }\n              ]\n            }\n          });\n        });\n      }\n    });\n  }\n\n  // ----------\n  _startComic() {\n    const frameHandler = () => {\n      const frameIndex = this._figureFrameIndex(false);\n      if (frameIndex !== -1 && frameIndex !== this.frameIndex) {\n        this.frameIndex = frameIndex;\n        this._updateImageVisibility();\n\n        if (this.onFrameChange) {\n          this.onFrameChange({\n            frameIndex,\n            isLastFrame: frameIndex === this.getFrameCount() - 1\n          });\n        }\n      }\n    };\n\n    if (this.viewer) {\n      this.viewer.addHandler('zoom', frameHandler);\n      this.viewer.addHandler('pan', frameHandler);\n    }\n\n    this.goToFrame(0);\n\n    if (this.onComicLoad) {\n      this.onComicLoad({});\n    }\n  }\n\n  // ----------\n  _updateImageVisibility() {\n    this.imageItems.forEach((imageItem) => {\n      if (imageItem.hideUntilFrame !== undefined) {\n        imageItem.tiledImage?.setOpacity(this.frameIndex < imageItem.hideUntilFrame ? 0 : 1);\n      }\n    });\n  }\n\n  // ----------\n  goToFrame(index: number) {\n    if (this.getFrameIndex() !== index) {\n      var frame = this.frames[index];\n      var bufferFactor = 0.2;\n      if (frame) {\n        var box = frame.clone();\n\n        box.width *= 1 + bufferFactor;\n        box.height *= 1 + bufferFactor;\n        box.x -= frame.width * bufferFactor * 0.5;\n        box.y -= frame.height * bufferFactor * 0.5;\n\n        this.viewer?.viewport.fitBounds(box);\n      }\n    }\n  }\n\n  // ----------\n  getFrameIndex() {\n    return this.frameIndex;\n  }\n\n  // ----------\n  _figureFrameIndex(current: boolean) {\n    let bestIndex = -1;\n    let bestDistance = Infinity;\n    if (this.viewer) {\n      const viewportBounds = this.viewer.viewport.getBounds(current);\n      const viewportCenter = viewportBounds.getCenter();\n\n      for (let i = 0; i < this.frames.length; i++) {\n        const frame = this.frames[i];\n        if (frame.containsPoint(viewportCenter)) {\n          const distance = viewportCenter.squaredDistanceTo(frame.getCenter());\n          if (distance < bestDistance) {\n            bestDistance = distance;\n            bestIndex = i;\n          }\n        }\n      }\n    }\n    return bestIndex;\n  }\n\n  // ----------\n  _getHitFrame(point: OpenSeadragon.Point) {\n    if (this.viewer) {\n      for (let i = 0; i < this.frames.length; i++) {\n        const frame = this.frames[i];\n        if (frame.containsPoint(point)) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  // ----------\n  getFrameCount() {\n    return this.frames.length;\n  }\n\n  // ----------\n  goToNextFrame() {\n    let index = this.getFrameIndex();\n    if (index < this.frames.length - 1) {\n      this.goToFrame(index + 1);\n    } else {\n      this.onEnd({});\n    }\n  }\n\n  // ----------\n  goToPreviousFrame() {\n    let index = this.getFrameIndex();\n    if (index > 0) {\n      this.goToFrame(index - 1);\n    }\n  }\n}\n","// Type definitions is a manual copy of @types/openseadragon\n\n// Type definitions for OpenSeadragon 2.4\n// Project: https://openseadragon.github.io/\n// Definitions by:  Álvaro Martínez <https://github.com/alvaromartmart>\n//                  RobertYost <https://github.com/RobertYost>\n//                  Jasper Staab <https://github.com/jstaab>\n//                  Kristin Ruben <https://github.com/kristinruben>\n//                  Geoff Harper <https://github.com/geoff-harper>\n//                  Justin <https://github.com/justincy>\n//                  Peter Blazejewicz <https://github.com/peterblazejewicz>\n// Definitions: https://github.com/alvaromartmart/types-openseadragon\n// TypeScript Version: 3.1\ndeclare namespace OpenSeadragon {\n  class Browser {\n    vendor: BROWSERS;\n    version: number;\n    alpha: boolean;\n  }\n\n  enum BROWSERS {\n    UNKNOWN = 0,\n    IE = 1,\n    FIREFOX = 2,\n    SAFARI = 3,\n    CHROME = 4,\n    OPERA = 5\n  }\n\n  enum ButtonState {\n    REST,\n    GROUP,\n    HOVER,\n    DOWN\n  }\n\n  enum ControlAnchor {\n    NONE,\n    TOP_LEFT,\n    TOP_RIGHT,\n    BOTTOM_LEFT,\n    BOTTOM_RIGHT,\n    ABSOLUTE\n  }\n\n  const DEFAULT_SETTINGS: Options;\n\n  const fullScreenApi: {\n    supportsFullScreen: boolean;\n    isFullScreen: () => boolean;\n    getFullScreenElement: () => HTMLElement;\n    requestFullScreen: () => void;\n    exitFullScreen: () => void;\n    cancelFullScreen: () => void;\n    fullScreenEventName: string;\n    fullScreenErrorEventName: string;\n  };\n\n  enum OverlayPlacement {\n    CENTER,\n    TOP_LEFT,\n    TOP,\n    TOP_RIGHT,\n    RIGHT,\n    BOTTOM_RIGHT,\n    BOTTOM,\n    BOTTOM_LEFT,\n    LEFT\n  }\n\n  enum OverlayRotationMode {\n    NO_ROTATION,\n    EXACT,\n    BOUNDING_BOX\n  }\n\n  let pixelDensityRatio: number;\n\n  enum Placement {\n    CENTER,\n    TOP_LEFT,\n    TOP,\n    TOP_RIGHT,\n    RIGHT,\n    BOTTOM_RIGHT,\n    BOTTOM,\n    BOTTOM_LEFT,\n    LEFT\n  }\n\n  let supportsCanvas: boolean;\n\n  let version: {\n    versionStr: string;\n    major: number;\n    minor: number;\n    revision: number;\n  };\n\n  function addClass(element: Element | string, className: string): void;\n\n  function addEvent(\n    element: Element | string,\n    eventName: string,\n    handler: (event: Event) => void,\n    useCapture?: boolean\n  ): void;\n\n  function cancelEvent(event?: OSDEvent<any>): void;\n\n  function capitalizeFirstLetter(value: string): string;\n\n  function createCallback(\n    object: object,\n    method: (...args: any[]) => void,\n    ...args: any[]\n  ): (...args: any[]) => void;\n\n  function delegate(\n    object: object,\n    method: (...args: any[]) => void\n  ): (object: any, ...args: any[]) => void; // REVIEW: unsure of return type\n\n  function extend(): any;\n\n  function getCssPropertyWithVendorPrefix(property: string): string;\n\n  function getElement(element: string | Element): Element;\n\n  function getElementOffset(element: Element | string): Point;\n\n  function getElementPosition(element: Element | string): Point;\n\n  function getElementSize(element: Element | string): Point;\n\n  function getElementStyle(element: Element | string): any; // CSSStyle?\n\n  function getMousePosition(event?: OSDEvent<any>): Point;\n\n  function getPageScroll(): Point;\n\n  function getString(property: string): string;\n\n  function getUrlParameter(key: string): string;\n\n  function getWindowSize(): Point;\n\n  function imageFormatSupported(extension?: string): boolean;\n\n  function indexOf(array: any[], searchElement: object, fromIndex?: number): number;\n\n  // (missing jquery functions)\n\n  function makeAjaxRequest(options: {\n    url: string;\n    success: (obj: object) => void;\n    error: (obj: object) => void;\n    headers: object;\n    responseType: string;\n    withCredentials?: boolean;\n  }): XMLHttpRequest;\n\n  function makeCenteredNode(element: Element | string): Element;\n\n  function makeNeutralElement(tagName: string): Element;\n\n  function makeTransparentImage(src: string): Element;\n\n  function now(): number;\n\n  function parseJSON(string: string): object;\n\n  function parseXml(string: string): Document;\n\n  function pointInElement(element: Element | string, point: Point): boolean;\n\n  function positiveModulo(number: number, modulo: number): number;\n\n  function removeClass(element: Element | string, className: string): void;\n\n  function removeEvent(\n    element: Element | string,\n    eventName: string,\n    handler: EventHandler<any>,\n    useCapture?: boolean\n  ): void;\n\n  function setElementOpacity(element: Element | string, opacity: number, usesAlpha?: boolean): void;\n\n  function setElementTouchActionNone(element: Element | string): void;\n\n  function setPageScroll(point: Point): void;\n\n  function setString(property: string, value: any): void;\n\n  function stopEvent(event?: OSDEvent<any>): void;\n\n  interface GestureSettings {\n    scrollToZoom?: boolean;\n    clickToZoom?: boolean;\n    dblClickToZoom?: boolean;\n    pinchToZoom?: boolean;\n    flickEnabled?: boolean;\n    flickMinSpeed?: number;\n    flickMomentum?: number;\n  }\n\n  interface NavImagesValues {\n    REST: string;\n    GROUP: string;\n    HOVER: string;\n    DOWN: string;\n  }\n  interface NavImages {\n    zoomIn: NavImagesValues;\n    zoomOut: NavImagesValues;\n    home: NavImagesValues;\n    fullpage: NavImagesValues;\n    rotateleft: NavImagesValues;\n    rotateright: NavImagesValues;\n    flip: NavImagesValues;\n    previous: NavImagesValues;\n    next: NavImagesValues;\n  }\n\n  interface Options {\n    id?: string;\n    element?: HTMLElement;\n    tileSources?:\n      | string\n      | string[]\n      | TileSource[]\n      | TileSourceOptions\n      | {\n          type: string;\n          levels: Array<{\n            url: string;\n            height: number;\n            width: number;\n          }>;\n        }\n      | {\n          Image: {\n            xmlns?: string;\n            Url: string;\n            Format: string;\n            Overlap: string;\n            TileSize: string;\n            Size: {\n              Width: string;\n              Height: string;\n            };\n          };\n        };\n    tabIndex?: number;\n    overlays?: any[];\n    prefixUrl?: string;\n    navImages?: NavImages;\n    debugMode?: boolean;\n    debugGridColor?: string[];\n    blendTime?: number;\n    alwaysBlend?: boolean;\n    autoHideControls?: boolean;\n    immediateRender?: boolean;\n    defaultZoomLevel?: number;\n    opacity?: number;\n    preload?: boolean;\n    compositeOperation?:\n      | 'source-over'\n      | 'source-atop'\n      | 'source-in'\n      | 'source-out'\n      | 'destination-over'\n      | 'destination-atop'\n      | 'destination-in'\n      | 'destination-out'\n      | 'lighter'\n      | 'copy'\n      | 'xor';\n    placeholderFillStyle?: string | CanvasGradient | CanvasPattern;\n    degrees?: number;\n    flipped?: boolean;\n    minZoomLevel?: number;\n    maxZoomLevel?: number;\n    homeFillsViewer?: boolean;\n    panHorizontal?: boolean;\n    panVertical?: boolean;\n    constrainDuringPan?: boolean;\n    wrapHorizontal?: boolean;\n    wrapVertical?: boolean;\n    minZoomImageRatio?: number;\n    maxZoomPixelRatio?: number;\n    smoothTileEdgesMinZoom?: number;\n    iOSDevice?: boolean;\n    autoResize?: boolean;\n    preserveImageSizeOnResize?: boolean;\n    minScrollDeltaTime?: number;\n    pixelsPerWheelLine?: number;\n    pixelsPerArrowPress?: number;\n    visibilityRatio?: number;\n    viewportMargins?: object;\n    imageLoaderLimit?: number;\n    clickTimeThreshold?: number;\n    clickDistThreshold?: number;\n    dblClickTimeThreshold?: number;\n    dblClickDistThreshold?: number;\n    springStiffness?: number;\n    animationTime?: number;\n    gestureSettingsMouse?: GestureSettings;\n    gestureSettingsTouch?: GestureSettings;\n    gestureSettingsPen?: GestureSettings;\n    gestureSettingsUnknown?: GestureSettings;\n    zoomPerClick?: number;\n    zoomPerScroll?: number;\n    zoomPerSecond?: number;\n    showNavigator?: boolean;\n    navigatorId?: string;\n    navigatorPosition?: 'TOP_LEFT' | 'TOP_RIGHT' | 'BOTTOM_LEFT' | 'BOTTOM_RIGHT' | 'ABSOLUTE';\n    navigatorSizeRatio?: number;\n    navigatorMaintainSizeRatio?: boolean;\n    navigatorTop?: number | string;\n    navigatorLeft?: number | string;\n    navigatorHeight?: number | string;\n    navigatorWidth?: number | string;\n    navigatorAutoResize?: boolean;\n    navigatorAutoFade?: boolean;\n    navigatorRotate?: boolean;\n    navigatorBackground?: string;\n    navigatorOpacity?: number;\n    navigatorBorderColor?: string;\n    navigatorDisplayRegionColor?: string;\n    controlsFadeDelay?: number;\n    controlsFadeLength?: number;\n    maxImageCacheCount?: number;\n    timeout?: number;\n    useCanvas?: boolean;\n    minPixelRatio?: number;\n    mouseNavEnabled?: number;\n    showNavigationControl?: boolean;\n    navigationControlAnchor?: ControlAnchor;\n    showZoomControl?: boolean;\n    showHomeControl?: boolean;\n    showFullPageControl?: boolean;\n    showRotationControl?: boolean;\n    showFlipControl?: boolean;\n    showSequenceControl?: boolean;\n    sequenceControlAnchor?: ControlAnchor;\n    navPrevNextWrap?: boolean;\n    zoomInButton?: string;\n    zoomOutButton?: string;\n    homeButton?: string;\n    fullPageButton?: string;\n    rotateLeftButton?: string;\n    rotateRightButton?: string;\n    previousButton?: string;\n    nextButton?: string;\n    sequenceMode?: boolean;\n    /**\n     * If sequenceMode is true, display this page initially.\n     * @default 0\n     */\n    initialPage?: number;\n    preserveViewport?: boolean;\n    preserveOverlays?: boolean;\n    showReferenceStrip?: boolean;\n    referenceStripScroll?: string;\n    referenceStripElement?: HTMLElement;\n    referenceStripHeight?: number;\n    referenceStripWidth?: number;\n    referenceStripPosition?: string;\n    referenceStripSizeRatio?: number;\n    collectionMode?: boolean;\n    collectionRows?: number;\n    collectionColumns?: number;\n    collectionLayout?: 'horizontal' | 'vertical';\n    collectionTileSize?: number;\n    collectionTileMargin?: number;\n    crossOriginPolicy?: 'Anonymous' | 'use-credentials' | false;\n    ajaxWithCredentials?: boolean;\n    loadTilesWithAjax?: boolean;\n    ajaxHeaders?: object;\n    imageSmoothingEnabled?: boolean;\n    rotationIncrement?: number;\n  }\n\n  interface TileSourceOptions {\n    url?: string;\n    referenceStripThumbnailUrl?: string;\n    success?: (event: Event) => void;\n    ajaxWithCredentials?: boolean;\n    ajaxHeaders?: object;\n    width?: number;\n    height?: number;\n    tileSize?: number;\n    tileWidth?: number;\n    tileHeight?: number;\n    tileOverlap?: number;\n    minLevel?: number;\n    maxLevel?: number;\n    getTileUrl?: (l: number, x: number, y: number) => string;\n  }\n\n  class Button extends EventSource {\n    currentState: ButtonState;\n    element: Element;\n    fadeDelay: number;\n    fadeLength: number;\n    tracker: MouseTracker;\n\n    constructor(options: {\n      element?: Element;\n      tooltip?: string;\n      srcRest?: string;\n      srcGroup?: string;\n      srcHover?: string;\n      srcDown?: string;\n      fadeDelay?: number;\n      fadeLength?: number;\n      onPress?: EventHandler<ButtonEvent>;\n      onRelease?: EventHandler<ButtonEvent>;\n      onClick?: EventHandler<ButtonEvent>;\n      onEnter?: EventHandler<ButtonEvent>;\n      onExit?: EventHandler<ButtonEvent>;\n      onFocus?: EventHandler<ButtonEvent>;\n      onBlur?: EventHandler<ButtonEvent>;\n    });\n\n    addHandler(\n      eventName: ButtonEventName,\n      handler: EventHandler<ButtonEvent>,\n      userData?: object\n    ): void;\n    addOnceHandler(\n      eventName: ButtonEventName,\n      handler: EventHandler<ButtonEvent>,\n      userData?: object,\n      times?: number\n    ): void;\n    disable(): void;\n    enable(): void;\n    getHandler(eventName: ButtonEventName): (source: ButtonEventName, ...args: any[]) => void;\n    raiseEvent(eventName: ButtonEventName, eventArgs: object): void;\n    removeAllHandlers(eventName: ButtonEventName): void;\n    removeHandler(eventName: ButtonEventName, handler: EventHandler<ButtonEvent>): void;\n  }\n\n  class ButtonGroup {\n    buttons: Button[];\n    element: Element;\n    tracker: MouseTracker;\n\n    constructor(options: { buttons: Button[]; element?: Element });\n  }\n\n  interface TControlOptions {\n    anchor?: ControlAnchor;\n    attachToViewer?: boolean;\n    autoFade?: boolean;\n  }\n\n  class Control {\n    anchor: ControlAnchor;\n    autoFade: boolean;\n    container: Element;\n    element: Element;\n    wrapper: Element;\n\n    constructor(element: Element, options: TControlOptions, container: Element);\n\n    destroy(): void;\n    isVisible(): boolean;\n    setOpacity(opacity: number): void;\n    setVisible(visible: boolean): void;\n  }\n\n  class ControlDock {\n    constructor(options: object);\n\n    addControl(element: Control, controlOptions: TControlOptions): void;\n    areControlsEnabled(): boolean;\n    clearControls(): ControlDock;\n    removeControl(element: Control): ControlDock;\n    setControlsEnabled(enabled: boolean): ControlDock;\n  }\n\n  class DisplayRect extends Rect {\n    maxLevel: number;\n    minLevel: number;\n\n    constructor(\n      x: number,\n      y: number,\n      width: number,\n      height: number,\n      minLevel: number,\n      maxLevel: number\n    );\n  }\n\n  class Drawer {\n    canvas: HTMLCanvasElement | HTMLElement;\n    container: Element;\n    context: CanvasRenderingContext2D | null;\n    // element : Element; // Deprecated\n\n    constructor(options: {\n      viewer: Viewer;\n      viewport: Viewport;\n      element: Element;\n      debugGridColor?: string;\n    });\n\n    blendSketch(options: {\n      opacity: number;\n      scale?: number;\n      translate?: Point;\n      compositeOperation?: string;\n      bounds?: Rect;\n    }): void;\n    canRotate(): boolean;\n    clear(): void;\n    destroy(): void;\n    drawTile(\n      tile: Tile,\n      drawingHandler: (context: CanvasRenderingContext2D, tile: any, rendered: any) => void, // TODO: determine handler parameter types\n      useSketch: boolean,\n      scale?: number,\n      translate?: Point\n    ): void;\n    getCanvasSize(sketch: boolean): Point;\n    getOpacity(): number;\n    setOpacity(opacity: number): Drawer;\n    viewportToDrawerRectangle(rectangle: Rect): Rect;\n    setImageSmoothingEnabled(imageSmoothingEnabled?: boolean): void;\n    viewportCoordToDrawerCoord(point: Point): Point;\n    clipWithPolygons(polygons: Point[][], useSketch?: boolean): void;\n  }\n\n  class DziTileSource extends TileSource {\n    constructor(\n      width: number,\n      height: number,\n      tileSize: number,\n      tileOverlap: number,\n      tilesUrl: number,\n      fileFormat: number,\n      displayRects: number,\n      minLevel: number,\n      maxLevel: number\n    );\n  }\n\n  class IIIFTileSource extends TileSource {\n    constructor(options: TileSourceOptions & { tileFormat?: string });\n  }\n\n  class ImageLoader {\n    constructor(options: { jobLimit?: number; timeout?: number });\n\n    addJob(options: {\n      src?: string;\n      loadWithAjax?: string;\n      ajaxHeaders?: string;\n      crossOriginPolicy?: string | boolean;\n      ajaxWithCredentials?: boolean;\n      callback?: () => void;\n      abort?: () => void;\n    }): void;\n    clear(): void;\n  }\n\n  class ImageTileSource extends TileSource {\n    constructor(options: {\n      url: string;\n      buildPyramid?: boolean;\n      crossOriginPolicy?: string | boolean;\n      ajaxWithCredentials?: string | boolean;\n      useCanvas?: boolean;\n    });\n  }\n\n  class LegacyTileSource extends TileSource {\n    constructor(\n      levels?: Array<{\n        url: string;\n        width: number;\n        height: number;\n      }>\n    );\n  }\n\n  interface MouseTrackerOptions {\n    element: Element | string;\n    startDisabled?: boolean;\n    clickTimeThreshold?: number;\n    clickDistThreshold?: number;\n    dblClickTimeThreshold?: number;\n    dblClickDistThreshold?: number;\n    stopDelay?: number;\n    enterHandler?: EventHandler<OSDEvent<any>>;\n    exitHandler?: EventHandler<OSDEvent<any>>;\n    pressHandler?: EventHandler<OSDEvent<any>>;\n    nonPrimaryPressHandler?: EventHandler<OSDEvent<any>>;\n    releaseHandler?: EventHandler<OSDEvent<any>>;\n    nonPrimaryReleaseHandler?: EventHandler<OSDEvent<any>>;\n    moveHandler?: EventHandler<OSDEvent<any>>;\n    scrollHandler?: EventHandler<OSDEvent<any>>;\n    clickHandler?: EventHandler<OSDEvent<any>>;\n    dblClickHandler?: EventHandler<OSDEvent<any>>;\n    dragHandler?: EventHandler<OSDEvent<any>>;\n    dragEndHandler?: EventHandler<OSDEvent<any>>;\n    pinchHandler?: EventHandler<OSDEvent<any>>;\n    keyDownHandler?: EventHandler<OSDEvent<any>>;\n    keyUpHandler?: EventHandler<OSDEvent<any>>;\n    keyHandler?: EventHandler<OSDEvent<any>>;\n    focusHandler?: EventHandler<OSDEvent<any>>;\n    blurHandler?: EventHandler<OSDEvent<any>>;\n    userData?: object;\n  }\n  class MouseTracker {\n    clickTimeThreshold: number;\n    clickDistThreshold: number;\n    dblClickTimeThreshold: number;\n    dblClickDistThreshold: number;\n    element: Element;\n\n    constructor(options: MouseTrackerOptions);\n\n    blurHandler: (event: OSDEvent<any>) => void;\n    clickHandler: (event: OSDEvent<any>) => void;\n    dblClickHandler: (event: OSDEvent<any>) => void;\n    destroy(): void;\n    dragEndHandler: (event: OSDEvent<any>) => void;\n    dragHandler: (event: OSDEvent<any>) => void;\n    enterHandler: (event: OSDEvent<any>) => void;\n    exitHandler: (event: OSDEvent<any>) => void;\n    focusHandler: (event: OSDEvent<any>) => void;\n    getActivePointerCount(): number;\n    getActivePointersListByType(type: string): GesturePointList;\n    getActivePointersListsExceptType(type: string): GesturePointList[];\n    keyDownHandler: (event: OSDEvent<any>) => void;\n    keyHandler: (event: OSDEvent<any>) => void;\n    keyUpHandler: (event: OSDEvent<any>) => void;\n    moveHandler: (event: OSDEvent<any>) => void;\n    nonPrimaryPressHandler: (event: OSDEvent<any>) => void;\n    nonPrimaryReleaseHandler: (event: OSDEvent<any>) => void;\n    pinchHandler: (event: OSDEvent<any>) => void;\n    pressHandler: (event: OSDEvent<any>) => void;\n    releaseHandler: (event: OSDEvent<any>) => void;\n    scrollHandler: (event: OSDEvent<any>) => void;\n    setTracking(track: boolean): any;\n    stopHandler: (event: OSDEvent<any>) => void;\n  }\n\n  interface GesturePoint {\n    id: number;\n    type: string;\n    captured: boolean;\n    isPrimary: boolean;\n    insideElementPressed: boolean;\n    insideElement: boolean;\n    speed: number;\n    direction: number;\n    contactPos: Point;\n    contactTime: number;\n    lastPos: Point;\n    lastTime: number;\n    currentPos: Point;\n    currentTime: number;\n  }\n\n  class GesturePointList {\n    buttons: Button[];\n    captureCount: number;\n    clicks: number;\n    contacts: number;\n    type: string;\n\n    constructor(type: string);\n\n    add(gesturePoint: GesturePoint): number;\n    addContact(): void;\n    asArray(): GesturePoint[];\n    getById(id: number): GesturePoint | null;\n    getByIndex(index: number): GesturePoint | null;\n    getLength(): number;\n    getPrimary(): GesturePoint | null;\n    removeById(id: number): number;\n    removeContact(): void;\n  }\n\n  class Navigator extends Viewer {\n    setFlip(state: boolean): void;\n    update(viewport: Viewport): void;\n    updateSize(): void;\n    setWidth(width: number | string): void;\n    setHeight(width: number | string): void;\n  }\n\n  class OsmTileSource extends TileSource {\n    constructor(\n      width: number,\n      height: number,\n      tileSize: number,\n      tileOverlap: number,\n      tilesUrl: string\n    );\n  }\n\n  type OnDrawCallback = (position: Point, size: Point, element: HTMLElement) => void;\n\n  interface OverlayOptions {\n    element: HTMLElement;\n    location: Point | Rect;\n    placement?: Placement;\n    onDraw?: OnDrawCallback;\n    checkResize?: boolean;\n    width?: number;\n    height?: number;\n    rotationMode?: boolean;\n  }\n\n  class Overlay {\n    constructor(options: OverlayOptions);\n    adjust(position: Point, size: Point): void;\n    destroy(): void;\n    drawHTML(container: HTMLElement): void;\n    getBounds(viewport: Viewport): Rect;\n    update(location: Point | Rect, placement: Placement): void;\n  }\n\n  class Point {\n    x: number;\n    y: number;\n    constructor(x?: number, y?: number);\n    apply(func: (v: number) => number): Point;\n    clone(): Point;\n    distanceTo(point: Point): number;\n    divide(factor: number): Point;\n    equals(point: Point): boolean;\n    minus(point: Point): Point;\n    negate(): Point;\n    plus(point: Point): Point;\n    rotate(degrees: number, pivot?: Point): Point;\n    squaredDistanceTo(point: Point): number;\n    times(factor: number): Rect;\n    toString(): string;\n  }\n\n  class Rect {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    degrees: number;\n    constructor(x?: number, y?: number, width?: number, height?: number, degrees?: number);\n    clone(): Rect;\n    containsPoint(point: Point, epsilon?: number): boolean;\n    equals(rectangle: Rect): boolean;\n    getAspectRatio(): number;\n    getBottomLeft(): Point;\n    getBottomRight(): Point;\n    getBoundingBox(): Rect;\n    getCenter(): Point;\n    getIntegerBoundingBox(): Rect;\n    getSize(): Point;\n    getTopLeft(): Point;\n    getTopRight(): Point;\n    intersection(rect: Rect): Rect;\n    rotate(degrees: number, pivot?: Rect): Rect;\n    times(factor: number): Rect;\n    toString(): string;\n    translate(delta: Point): Rect;\n    union(rect: Rect): Rect;\n  }\n\n  class ReferenceStrip {\n    constructor(options: object);\n    setFocus(): void;\n    update(): void;\n  }\n\n  class Spring {\n    animationTime: number;\n    current: {\n      value: number;\n      time: number;\n    };\n    springStiffness: number;\n    start: {\n      value: number;\n      time: number;\n    };\n    constructor(options: {\n      springStiffness: number;\n      animationTime: number;\n      initial?: number;\n      exponential?: boolean;\n    });\n    isAtTargetValue(): boolean;\n    resetTo(target: number): void;\n    shiftBy(delta: number): void;\n    springTo(target: number): void;\n    update(): void;\n  }\n\n  class Tile {\n    ajaxHeaders: object;\n    beingDrawn: boolean;\n    blendStart: number;\n    bounds: Rect;\n    cacheKey: string;\n    context2D: CanvasRenderingContext2D;\n    element: Element;\n    exists: boolean;\n    image: object;\n    imgElement: HTMLImageElement;\n    isBottomMost: boolean;\n    isRightMost: boolean;\n    lastTouchTime: number;\n    level: number;\n    loaded: boolean;\n    loading: boolean;\n    loadWithAjax: boolean;\n    opacity: number;\n    position: Point;\n    size: Point;\n    sourceBounds: Rect;\n    style: string;\n    url: string;\n    visibility: number;\n    x: number;\n    y: number;\n\n    constructor(\n      level: number,\n      x: number,\n      y: number,\n      bounds: Rect,\n      exists: boolean,\n      url: string,\n      context2D: CanvasRenderingContext2D,\n      loadWithAjax: boolean,\n      ajaxHeaders: object,\n      sourceBounds: Rect\n    );\n    drawCanvas(\n      context: CanvasRenderingContext2D,\n      drawingHandler: (context: CanvasRenderingContext2D, tile: any, rendered: any) => void,\n      scale?: number,\n      translate?: Point\n    ): void;\n    drawHTML(container: Element): void;\n    getScaleForEdgeSmoothing(): number;\n    getTranslationForEdgeSmoothing(scale?: number): Point;\n    toString(): string;\n    unload(): void;\n  }\n\n  class TileCache {\n    constructor(options: { maxImageCacheCount?: number });\n    cacheTile(options: {\n      tile: Tile;\n      image: HTMLImageElement; // TODO: check type\n      tiledImage: TiledImage;\n      cutoff?: number;\n    }): void;\n    clearTilesFor(tiledImage: TiledImage): void;\n    numTilesLoaded(): number;\n  }\n\n  class TiledImage {\n    source: TileSource;\n    constructor(options: {\n      source: TileSource;\n      viewer: Viewer;\n      tileCache: TileCache;\n      drawer: Drawer;\n      imageLoader: ImageLoader;\n      x?: number;\n      y?: number;\n      width?: number;\n      height?: number;\n      fitBounds?: Rect;\n      fitBoundsPlacement?: Placement;\n      clip?: Rect;\n      springStiffness?: number;\n      animationTime?: boolean;\n      minZoomImageRatio?: number;\n      wrapHorizontal?: boolean;\n      wrapVertical?: boolean;\n      immediateRender?: boolean;\n      blendTime?: number;\n      alwaysBlend?: boolean;\n      minPixelRatio?: number;\n      smoothTileEdgesMinZoom?: number;\n      iOSDevice?: boolean;\n      opacity?: number;\n      preload?: boolean;\n      compositeOperation?: string;\n      debugMode?: boolean;\n      placeholderFillStyle?: string | CanvasGradient | CanvasPattern;\n      crossOriginPolicy?: string | boolean;\n      ajaxWithCredentials?: boolean;\n      loadTilesWithAjax?: boolean;\n      ajaxHeaders?: object;\n    });\n\n    addHandler(eventName: string, handler: EventHandler<TiledImageEvent>, userData?: object): void;\n    addOnceHandler(\n      eventName: string,\n      handler: EventHandler<TiledImageEvent>,\n      userData?: object\n    ): void;\n    destroy(): void;\n    draw(): void;\n    fitBounds(bounds: Rect, anchor?: Placement, immediately?: boolean): void;\n    getBounds(current?: boolean): Rect;\n    getBoundsNoRotate(current?: boolean): Rect;\n    getClip(): Rect | null;\n    getClippedBounds(current?: boolean): Rect;\n    getCompositeOperation(): string;\n    getContentSize(): Point;\n    getFullyLoaded(): boolean;\n    getHandler(eventName: string): (source: Event, ...args: any[]) => void;\n    getOpacity(): number;\n    getPreload(): boolean;\n    getRotation(current?: boolean): number;\n    imageToViewerElementCoordinats(pixel: Point): Point;\n    imageToViewportCoordinates(position: Point, current?: boolean): Point;\n    imageToViewportCoordinates(imageX: number, imageY: number, current?: boolean): Point;\n    imageToViewportRectangle(\n      imageX: number,\n      imageY?: number,\n      pixelWidth?: number,\n      pixelHeight?: number,\n      current?: boolean\n    ): Rect;\n    imageToViewportRectangle(\n      position: Rect,\n      pixelWidth?: number,\n      pixelHeight?: number,\n      current?: boolean\n    ): Rect;\n\n    imageToViewportZoom(imageZoom: number): number;\n    imageToWindowCoordinates(pixel: Point): Point;\n    needsDraw(): boolean;\n    raiseEvent(eventName: string, eventArgs: object): void;\n    removeAllHandlers(eventName: string): void;\n    removeHandler(eventName: string, handler: EventHandler<TiledImageEvent>): void;\n    reset(): void;\n    resetCroppingPolygons(): void;\n    setClip(newClip: Rect | null): void;\n    setCompositeOperation(compositeOperation: string): void;\n    setCroppingPolygons(polygons: Point[][]): void;\n    setHeight(height: number, immediately?: boolean): void;\n    setOpacity(opacity: number): void;\n    setPosition(position: Point, immediately?: boolean): void;\n    setPreload(preload: boolean): void;\n    setRotation(degrees: number, immediately?: boolean): void;\n    setWidth(width: number, immediately?: boolean): void;\n    update(): boolean;\n    viewerElementToImageCoordinates(pixel: Point): Point;\n    viewportToImageCoordinates(position: Point, current?: boolean): Point;\n    viewportToImageCoordinates(viewerX: number, viewerY: number, current?: boolean): Point;\n    viewportToImageRectangle(position: Rect): Rect;\n    viewportToImageRectangle(\n      viewportX: number,\n      viewportY: number,\n      pixelWidth?: number,\n      pixelHeight?: number,\n      current?: boolean\n    ): Rect;\n    viewportToImageZoom(viewportZoom: number): number;\n    windowToImageCoordinates(pixel: Point): Point;\n  }\n\n  class TileSource extends EventSource {\n    aspectRatio: number;\n    dimensions: Point;\n    maxLevel: number;\n    minlevel: number;\n    ready: boolean;\n    tileOverlap: number;\n    constructor(options: TileSourceOptions);\n    addHandler(eventName: string, handler: EventHandler<TileSourceEvent>, userData?: object): void;\n    addOnceHandler(\n      eventName: string,\n      handler: EventHandler<TileSourceEvent>,\n      userData?: object,\n      times?: number\n    ): void;\n    configure(data: string | object | any[] | Document): object;\n    getClosestLevel(): number;\n    getHandler(eventName: string): (event: Event) => void;\n    getImageInfo(url: string): void;\n    getLevelScale(level: number): number;\n    getNumTiles(level: number): number;\n    getPixelRatio(level: number): number;\n    getTileAjaxHeaders(level: number, x: number, y: number): object;\n    getTileAtPoint(level: number, point: Point): Tile;\n    getTileBounds(level: number, x: number, y: number, isSource?: boolean): Rect;\n    getTileHeight(level: number): number;\n    getTileUrl(level: number, x: number, y: number): string;\n    getTileWidth(level: number): number;\n    raiseEvent(eventName: string, eventArgs: object): void;\n    removeAllHandlers(eventName: string): void;\n    removeHandler(eventName: string, handler: EventHandler<TileSourceEvent>): void;\n    supports(data: string | object | any[] | Document, url: string): boolean;\n    tileExists(level: number, x: number, y: number): boolean;\n  }\n\n  class TmsTileSource extends TileSource {\n    constructor(\n      width: number,\n      height: number,\n      tileSize: number,\n      tileOverlap: number,\n      tilesUrl: string\n    );\n  }\n\n  interface ImageOptions {\n    index?: number;\n    replace?: boolean;\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    fitBounds?: Rect;\n    fitBoundsPlacement?: Placement;\n    clip?: Rect;\n    opacity?: number;\n    preload?: boolean;\n    degrees?: number;\n    compositeOperation?: string;\n    crossOriginPolicy?: string;\n    ajaxWithCredentials?: boolean;\n    loadTilesWithAjax?: boolean;\n    ajaxHeaders?: object;\n    success?: (event: Event) => void;\n    error?: (error: Error) => void;\n    collectionImmediately?: boolean;\n    placeholderFillStyle?: string | CanvasGradient | CanvasPattern;\n  }\n\n  interface TiledImageOptions extends ImageOptions {\n    tileSource: string | object;\n  }\n\n  interface SimpleImageOptions extends ImageOptions {\n    url: string;\n  }\n\n  class Viewer extends ControlDock {\n    canvas: HTMLElement;\n    container: HTMLElement;\n    drawer: Drawer;\n    element: HTMLElement;\n    initialPage: number;\n    navigator: Navigator;\n    viewport: Viewport;\n    world: World;\n    referenceStrip: ReferenceStrip;\n    innerTracker: {\n      scrollHandler: (event: { originalEvent: MouseEvent; scroll: number }) => void;\n    };\n\n    constructor(options: Options);\n    _cancelPendingImages(): void;\n    addHandler(\n      eventName: ViewerEventName,\n      callback: EventHandler<ViewerEvent>,\n      userData?: object\n    ): void;\n    addOnceHandler(\n      eventName: ViewerEventName,\n      callback: EventHandler<ViewerEvent>,\n      userData?: object,\n      times?: number\n    ): void;\n    addOverlay(\n      element: HTMLElement | string | object,\n      location?: Point | Rect,\n      placement?: Placement,\n      onDraw?: (element: HTMLElement, location: Location, placement: Placement) => void\n    ): Viewer;\n    addReferenceStrip(): void;\n    addSimpleImage(options: SimpleImageOptions): void;\n    addTiledImage(options: TiledImageOptions): void;\n    bindSequenceControls(): Viewer;\n    bindStandardControls(): Viewer;\n    clearOverlays(): Viewer;\n    close(): Viewer;\n    currentPage(): number;\n    destroy(): void;\n    forceRedraw(): Viewer;\n    gestureSettingsByDeviceType(type: string): GestureSettings;\n    getHandler(eventName: string): (event: Event) => void;\n    getOverlayById(element: Element | string): Overlay;\n    goToPage(page: number): Viewer;\n    isFullPage(): boolean;\n    isMouseNavEnabled(): boolean;\n    isOpen(): boolean;\n    isVisible(): boolean;\n    open(tileSources: string | object | TileSource[], initialPage?: number): Viewer;\n    raiseEvent(eventName: string, eventArgs?: object): void;\n    removeAllHandlers(eventName: string): void;\n    removeHandler(eventName: string, handler: EventHandler<ViewerEvent>): void;\n    removeOverlay(overlay: Element | string): Viewer;\n    removeReferenceStrip(): void;\n    setControlsEnabled(enabled: boolean): Viewer;\n    setDebugMode(debug: boolean): Viewer;\n    setFullPage(fullScreen: boolean): Viewer;\n    setFullScreen(fullScreen: boolean): Viewer;\n    setMouseNavEnabled(enabled: boolean): Viewer;\n    setVisible(visible: boolean): Viewer;\n    updateOverlay(element: Element | string, location: Point | Rect, placement?: Placement): Viewer;\n  }\n\n  class Viewport {\n    constructor(options: {\n      margins: object;\n      springStiffness?: number;\n      animationTime?: number;\n      minZoomImageRatio?: number;\n      maxZoomPixelRatio?: number;\n      visibilityRatio?: number;\n      wrapHorizontal?: boolean;\n      wrapVertical?: boolean;\n      defaultZoomLevel?: number;\n      minZoomLevel?: number;\n      maxZoomLevel?: number;\n      degrees?: number;\n      homeFillsViewer?: boolean;\n    });\n\n    applyConstraints(immediately?: boolean): Viewport;\n    deltaPixelsFromPoints(deltaPoints: Point, current?: boolean): Point;\n    deltaPixelsFromPointsNoRotate(deltaPoints: Point, current?: boolean): Point;\n    deltaPointsFromPixels(deltaPoints: Point, current?: boolean): Point;\n    deltaPointsFromPixelsNoRotate(deltaPoints: Point, current?: boolean): Point;\n    ensureVisible(immediately?: boolean): Viewport;\n    fitBounds(bounds: Rect, immediately?: boolean): Viewport;\n    fitBoundsWithConstraints(bounds: Rect, immediately?: boolean): Viewport;\n    fitHorizontally(immediately?: boolean): Viewport;\n    fitVertically(immediately?: boolean): Viewport;\n    getAspectRatio(): any; // TODO: determine return type\n    getBounds(current?: boolean): Rect;\n    getBoundsNoRotate(current?: boolean): Rect;\n    getBoundsNoRotateWithMargins(current?: boolean): Rect;\n    getBoundsWithMargins(current?: boolean): Rect;\n    getCenter(current?: boolean): Point;\n    getConstrainedBounds(current?: boolean): Viewport;\n    getContainerSize(): Point;\n    getFlip(): boolean;\n    getHomeBounds(): Rect;\n    getHomeBoundsNoRotate(): Rect;\n    getHomeZoom(): number;\n    getMargins(): object;\n    getMaxZoom(): number;\n    getMinZoom(): number;\n    getRotation(): number;\n    getZoom(current?: boolean): number;\n    goHome(immediately?: boolean): void;\n    imageToViewerElementCoordinates(pixel: Point): Point;\n    imageToViewportCoordinates(position: Point): Point;\n    imageToViewportCoordinates(imageX: number, imageY: number): Point;\n    imageToViewportCoordinates(\n      imageX: number,\n      imageY: number,\n      pixelWidth: number,\n      pixelHeight: number\n    ): Point;\n    imageToViewportRectangle(\n      imageX: number | Rect,\n      imageY?: number,\n      pixelWidth?: number,\n      pixelHeight?: number\n    ): Rect;\n    imageToViewportZoom(imageZoom: number): number;\n    imageToWindowCoordinates(pixel: Point): Point;\n    panBy(delta: Point, immediately?: boolean): Viewport;\n    panTo(center: Point, immediately?: boolean): Viewport;\n    pixelFromPoint(point: Point, current?: boolean): Point;\n    pixelFromPointNoRotate(point: Point, current?: boolean): Point;\n    pointFromPixel(point: Point, current?: boolean): Point;\n    pointFromPixelNoRotate(point: Point, current?: boolean): Point;\n    resetContentSize(contentSize: Point): Viewport;\n    resize(): Viewport;\n    setFlip(state: boolean): Viewport;\n    setMargins(margins: object): void;\n    setRotation(degrees: number): Viewport;\n    toggleFlip(): Viewport;\n    update(): boolean;\n    viewerElementToImageCoordinates(pixel: Point): Point;\n    viewerElementToViewportCoordinates(pixel: Point): Point;\n    viewerElementToViewportRectangle(rectangle: Rect): Rect;\n    viewportToImageCoordinates(position: Point): Point;\n    viewportToImageCoordinates(viewerX: number, viewerY: number): Point;\n    viewportToImageRectangle(rectangle: Rect): Rect;\n    viewportToImageRectangle(\n      viewerX: number,\n      viewerY: number,\n      pointWidth: number,\n      pointHeight: number\n    ): Rect;\n    viewportToImageZoom(viewportZoom: number): number;\n    viewportToViewerElementCoordinates(point: Point): Point;\n    viewportToViewerElementRectangle(rectangle: Rect): Rect;\n    viewportToWindowCoordinates(point: Point): Point;\n    windowToImageCoordinates(pixel: Point): Point;\n    windowToViewportCoordinates(pixel: Point): Point;\n    zoomBy(factor: number, refPoint?: Point, immediately?: boolean): Viewport;\n    zoomTo(factor: number, refPoint?: Point, immediately?: boolean): Viewport;\n  }\n\n  class World extends EventSource {\n    constructor(options: object);\n\n    addHandler(\n      eventName: WorldEventName,\n      callback: EventHandler<WorldEvent>,\n      userData?: object\n    ): void;\n    addItem(item: TiledImage, options?: { index?: number }): void;\n    addOnceHandler(\n      eventName: string,\n      handler: EventHandler<WorldEvent>,\n      userData?: object,\n      times?: number\n    ): void;\n    arrange(options: {\n      immediately?: boolean;\n      layout?: 'horizontal' | 'vertical';\n      rows?: number;\n      columns?: number;\n      tileSize?: number;\n      tileMargin?: number;\n    }): void;\n    draw(): void;\n    getContentFactor(): number;\n    getHandler(eventName: string): (event: Event) => void;\n    getHomeBounds(): Rect;\n    getIndexOfItem(item: TiledImage): number;\n    getItemAt(id: number): TiledImage;\n    getItemCount(): number;\n    needsDraw(): boolean;\n    raiseEvent(eventName: string, eventArgs?: object): void;\n    removeAll(): void;\n    removeAllHandlers(eventName: string): void;\n    removeHandler(eventName: string, handler: EventHandler<WorldEvent>): void;\n    removeItem(item: TiledImage): void;\n    resetItems(): void;\n    setAutoRefigureSizes(value?: boolean): void;\n    setItemIndex(item: TiledImage, index: number): void;\n    update(): void;\n  }\n\n  class ZoomifyTileSource extends TileSource {\n    constructor(width: number, height: number, tileSize: number, tilesUrl: string);\n  }\n\n  // TODO: use proper eventName type aliases, and OSDEvent where appropiate\n\n  type EventHandler<T extends OSDEvent<any>> = (event: T) => void;\n\n  type ButtonEventName = 'blur' | 'click' | 'enter' | 'exit' | 'focus' | 'press' | 'release';\n  type TiledImageEventName =\n    | 'bounds-change'\n    | 'clip-change'\n    | 'composite-operation-change'\n    | 'fully-loaded-change'\n    | 'opacity-change';\n  type TileSourceEventname = 'open-failed' | 'ready';\n  type ViewerEventName =\n    | 'add-item-failed'\n    | 'add-overlay'\n    | 'animation'\n    | 'animation-finish'\n    | 'animation-start'\n    | 'canvas-click'\n    | 'canvas-double-click'\n    | 'canvas-drag'\n    | 'canvas-drag-end'\n    | 'canvas-enter'\n    | 'canvas-exit'\n    | 'canvas-key'\n    | 'canvas-nonprimary-press'\n    | 'canvas-nonprimary-release'\n    | 'canvas-pinch'\n    | 'canvas-press'\n    | 'canvas-release'\n    | 'canvas-scroll'\n    | 'clear-overlay'\n    | 'close'\n    | 'constrain'\n    | 'container-enter'\n    | 'container-exit'\n    | 'controls-enabled'\n    | 'flip'\n    | 'full-page'\n    | 'full-screen'\n    | 'home'\n    | 'mouse-enabled'\n    | 'navigator-click'\n    | 'navigator-drag'\n    | 'navigator-scroll'\n    | 'open'\n    | 'open-failed'\n    | 'page'\n    | 'pan'\n    | 'pre-full-page'\n    | 'pre-full-screen'\n    | 'remove-overlay'\n    | 'reset-size'\n    | 'resize'\n    | 'rotate'\n    | 'tile-drawing'\n    | 'tile-drawn'\n    | 'tile-load-failed'\n    | 'tile-loaded'\n    | 'tile-unloaded'\n    | 'update-level'\n    | 'update-overlay'\n    | 'update-tile'\n    | 'update-viewport'\n    | 'viewport-change'\n    | 'visible'\n    | 'zoom';\n  type WorldEventName = 'add-item' | 'item-index-change' | 'metrics-change' | 'remove-item';\n\n  interface OSDEvent<T> extends Event {\n    eventSource?: T;\n    userData: any;\n  }\n\n  interface ButtonEvent extends OSDEvent<Button> {\n    originalEvent: Event;\n  }\n\n  interface TiledImageEvent extends OSDEvent<TiledImage> {\n    compositeOperationChange?: string;\n    fullyLoaded?: boolean;\n    opacity?: boolean;\n  }\n\n  interface TileSourceEvent extends OSDEvent<TileSource> {\n    message?: string;\n    source?: string;\n    tileSource?: object;\n  }\n\n  interface ViewerEvent extends OSDEvent<Viewer> {\n    message?: string;\n    source?: string;\n    options?: object;\n    element?: Element;\n    location?: Point | Rect;\n    placement?: Placement;\n    tracker?: MouseTracker;\n    position?: Point;\n    quick?: boolean;\n    shift?: boolean;\n    preventDefaultAction?: true;\n    delta?: Point;\n    speed?: number;\n    direction?: number;\n    pointerType?: string;\n    button?: number;\n    buttons?: number;\n    pointers?: number;\n    insideElementPressed?: boolean;\n    buttonDownAny?: boolean;\n    preventVerticalPan?: boolean;\n    preventHorizontalPan?: boolean;\n    gesturePoints?: GesturePoint[];\n    lastCenter?: Point;\n    center?: Point;\n    lastDistance?: number;\n    insideElementReleased?: boolean;\n    scroll?: number;\n    immediately?: number;\n    enabled?: boolean;\n    flipped?: number;\n    fullPage?: boolean;\n    fullScreen?: boolean;\n    page?: number;\n    contentSize?: Point;\n    contentBounds?: Rect;\n    homeBounds?: Rect;\n    contentFactor?: number;\n    newContainerSize?: Point;\n    mantain?: boolean;\n    degrees?: number;\n    tile?: Tile;\n    tiledImage?: TiledImage | XMLHttpRequest;\n    context?: Tile;\n    rendered?: Tile;\n    time?: number;\n    tileRequest?: XMLHttpRequest;\n    getCompletionCallback?: (...args: any) => void;\n    visible?: boolean;\n    refPoint?: Point;\n    zoom?: number;\n  }\n\n  interface WorldEvent extends OSDEvent<World> {\n    item?: TiledImage;\n    previousIndex?: number;\n    newIndex?: number;\n  }\n}\n\n// Custom type needed for importing types data without having to import the actual JS\nexport interface OpenSeadragonType {\n  (options: OpenSeadragon.Options): OpenSeadragon.Viewer;\n  Rect: typeof OpenSeadragon.Rect;\n}\n\nexport type ViewerType = OpenSeadragon.Viewer;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQGRhbjUwMy9sb2FkLWpzL2luZGV4LmpzIiwic3JjL2RlbW8vZGVtby50cyIsInNyYy9saWJyYXJ5L2RyaWZ0b3J5LnRzIiwic3JjL2xpYnJhcnkvb3BlbnNlYWRyYWdvbi50eXBlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDaERBLGlFQUEyQztBQUUzQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUU7SUFDNUMsSUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBMEIsQ0FBQztJQUNoRyxJQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQzVELElBQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDeEQsSUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xFLElBQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDMUQsSUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUMxRCxJQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFD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QUMsRUFBRTtZQUNiLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzNCO0lBQ0gsQ0FBQztJQUNILGVBQUM7QUFBRCxDQXZUQSxBQXVUQyxJQUFBOzs7OztBQ25XRCw0REFBNEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYWxyZWFkeUNhbGxlZFNjcmlwdHMgPSBbXTtcclxudmFyIGFsbFNjcmlwdHMgPSB7fTtcclxudmFyIGRlZmF1bHRTY3JpcHQgPSB7IGhhc0xvYWRlZDogZmFsc2UsIGNhbGxiYWNrczogW10gfTtcclxudmFyIGFkZENhbGxiYWNrID0gZnVuY3Rpb24gKHNyYywgY2FsbGJhY2spIHtcclxuICAgIHZhciBzY3JpcHQgPSBhbGxTY3JpcHRzW3NyY107XHJcbiAgICBpZiAoIXNjcmlwdClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAoc2NyaXB0Lmhhc0xvYWRlZCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBzY3JpcHQgaGFzIGFscmVhZHkgYmVlbiBwcmV2aW91c2x5IGxvYWRlZCwganVzdCBydW4gdGhlIGNhbGxiYWNrIGltbWVkaWF0ZWx5XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChzY3JpcHQuY2FsbGJhY2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgc2NyaXB0LmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNjcmlwdC5jYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuZnVuY3Rpb24gbG9hZEpTKHNyYywgY2FsbGJhY2spIHtcclxuICAgIHZhciBzY3JpcHQgPSBhbGxTY3JpcHRzW3NyY10gfHwgZGVmYXVsdFNjcmlwdDtcclxuICAgIGFsbFNjcmlwdHNbc3JjXSA9IHNjcmlwdDtcclxuICAgIGlmIChhbHJlYWR5Q2FsbGVkU2NyaXB0cy5pbmRleE9mKHNyYykgPCAwKSB7XHJcbiAgICAgICAgYWxyZWFkeUNhbGxlZFNjcmlwdHMucHVzaChzcmMpO1xyXG4gICAgICAgIHZhciAkc2NyaXB0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICRzY3JpcHRFbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbG9hZC1qcy1zY3JpcHQnKTtcclxuICAgICAgICAkc2NyaXB0RWxlbS5zcmMgPSBzcmM7XHJcbiAgICAgICAgJHNjcmlwdEVsZW0ub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhZGRDYWxsYmFjayhzcmMsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRTY3JpcHQgPSBhbGxTY3JpcHRzW3NyY107XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVkU2NyaXB0KSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkU2NyaXB0Lmhhc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgdGhpc1NvdXJjZSBpbiBhbGxTY3JpcHRzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1NjcmlwdCA9IGFsbFNjcmlwdHNbdGhpc1NvdXJjZV0gfHwgZGVmYXVsdFNjcmlwdDtcclxuICAgICAgICAgICAgICAgIHRoaXNTY3JpcHQuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYigpOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCgkc2NyaXB0RWxlbSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhZGRDYWxsYmFjayhzcmMsIGNhbGxiYWNrKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBsb2FkSlM7XHJcbiIsImltcG9ydCBEcmlmdG9yeSBmcm9tICcuLi9saWJyYXJ5L2RyaWZ0b3J5JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyaWZ0b3J5LXZpZXdlci1jb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG4gIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0LWJ1dHRvbicpO1xuICBjb25zdCBlbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW5kLWJ1dHRvbicpO1xuICBjb25zdCBwcmV2aW91c0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2aW91cy1idXR0b24nKTtcbiAgY29uc3QgbmV4dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0LWJ1dHRvbicpO1xuICBjb25zdCBoaWRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhpZGUtYnV0dG9uJyk7XG4gIGNvbnN0IGZyYW1lSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mcmFtZS1pbmZvJyk7XG5cbiAgaWYgKCFjb250YWluZXIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgZmluZCB2aWV3ZXIgY29udGFpbmVyJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZHJpZnRvcnkgPSBuZXcgRHJpZnRvcnkoe1xuICAgIGNvbnRhaW5lcixcbiAgICBwcmVmaXhVcmw6ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL29wZW5zZWFkcmFnb25AMi40L2J1aWxkL29wZW5zZWFkcmFnb24vaW1hZ2VzLycsXG4gICAgb25Db21pY0xvYWQ6ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdsb2FkZWQhJyk7XG4gICAgfSxcbiAgICBvbkZyYW1lQ2hhbmdlOiAoeyBmcmFtZUluZGV4ID0gMCwgaXNMYXN0RnJhbWUgfSkgPT4ge1xuICAgICAgaWYgKGZyYW1lSW5mbykge1xuICAgICAgICBsZXQgdGV4dCA9IGBGcmFtZSAke2ZyYW1lSW5kZXggKyAxfWA7XG4gICAgICAgIGlmIChpc0xhc3RGcmFtZSkge1xuICAgICAgICAgIHRleHQgKz0gJyAobGFzdCBmcmFtZSEpJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZyYW1lSW5mby50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBvbkVuZDogKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1VzZXIgdHJ5aW5nIHRvIGdvIHBhc3QgZW5kJyk7XG4gICAgfVxuICB9KTtcblxuICBzdGFydEJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZHJpZnRvcnkuZ29Ub0ZyYW1lKDApO1xuICB9KTtcblxuICBlbmRCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRyaWZ0b3J5LmdvVG9GcmFtZShkcmlmdG9yeS5nZXRGcmFtZUNvdW50KCkgLSAxKTtcbiAgfSk7XG5cbiAgcHJldmlvdXNCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRyaWZ0b3J5LmdvVG9QcmV2aW91c0ZyYW1lKCk7XG4gIH0pO1xuXG4gIG5leHRCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRyaWZ0b3J5LmdvVG9OZXh0RnJhbWUoKTtcbiAgfSk7XG5cbiAgaGlkZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKTtcbiAgfSk7XG5cbiAgLy8gY29uc3QgY29taWNOYW1lID0gJ2NvbWljMi5qc29uJztcbiAgY29uc3QgY29taWNOYW1lID0gJ2NvbWljLmpzb24nO1xuICBmZXRjaChjb21pY05hbWUpXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IocmVzcG9uc2UpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkICcgKyBjb21pY05hbWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGpzb24pO1xuICAgICAgZHJpZnRvcnkub3BlbkNvbWljKGpzb24pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xufSk7XG4iLCJpbXBvcnQgbG9hZEpzIGZyb20gJ0BkYW41MDMvbG9hZC1qcyc7XG5pbXBvcnQgeyBDb21pYyB9IGZyb20gJy4vQ29taWMudHlwZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9Db21pYy50eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL29wZW5zZWFkcmFnb24udHlwZXMnO1xuaW1wb3J0IHsgT3BlblNlYWRyYWdvblR5cGUsIFZpZXdlclR5cGUgfSBmcm9tICcuL29wZW5zZWFkcmFnb24udHlwZXMnO1xuXG5pbnRlcmZhY2UgT3NkUmVxdWVzdCB7XG4gIHJlc29sdmU6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQ7XG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcbn1cblxubGV0IE9wZW5TZWFkcmFnb246IE9wZW5TZWFkcmFnb25UeXBlIHwgdW5kZWZpbmVkO1xubGV0IG9zZFJlcXVlc3Q6IE9zZFJlcXVlc3QgfCB1bmRlZmluZWQ7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgT3BlblNlYWRyYWdvbjogT3BlblNlYWRyYWdvblR5cGU7XG4gIH1cbn1cblxuY29uc3Qgb3NkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgb3NkUmVxdWVzdCA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG59KTtcblxuaW50ZXJmYWNlIEltYWdlSXRlbSB7XG4gIGhpZGVVbnRpbEZyYW1lPzogbnVtYmVyO1xuICB0aWxlZEltYWdlPzogT3BlblNlYWRyYWdvbi5UaWxlZEltYWdlO1xufVxuXG50eXBlIEZyYW1lID0gT3BlblNlYWRyYWdvbi5SZWN0O1xudHlwZSBDb250YWluZXIgPSBIVE1MRWxlbWVudDtcbnR5cGUgT25GcmFtZUNoYW5nZSA9IChwYXJhbXM6IHsgZnJhbWVJbmRleDogbnVtYmVyOyBpc0xhc3RGcmFtZTogYm9vbGVhbiB9KSA9PiB2b2lkO1xudHlwZSBPbkNvbWljTG9hZCA9IChwYXJhbXM6IHt9KSA9PiB2b2lkO1xudHlwZSBPbkVuZCA9IChwYXJhbXM6IHt9KSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgRHJpZnRvcnlBcmd1bWVudHMge1xuICBjb250YWluZXI6IENvbnRhaW5lcjtcbiAgT3BlblNlYWRyYWdvbj86IE9wZW5TZWFkcmFnb25UeXBlO1xuICBvbkZyYW1lQ2hhbmdlPzogT25GcmFtZUNoYW5nZTtcbiAgb25Db21pY0xvYWQ/OiBPbkNvbWljTG9hZDtcbiAgb25FbmQ/OiBPbkVuZDtcbiAgcHJlZml4VXJsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmlmdG9yeSB7XG4gIGNvbnRhaW5lcjogQ29udGFpbmVyO1xuICBvbkZyYW1lQ2hhbmdlOiBPbkZyYW1lQ2hhbmdlO1xuICBvbkNvbWljTG9hZDogT25Db21pY0xvYWQ7XG4gIG9uRW5kOiBPbkVuZDtcbiAgaW1hZ2VJdGVtczogQXJyYXk8SW1hZ2VJdGVtPiA9IFtdO1xuICBmcmFtZXM6IEFycmF5PEZyYW1lPiA9IFtdO1xuICBmcmFtZUluZGV4OiBudW1iZXIgPSAtMTtcbiAgbGFzdFNjcm9sbFRpbWU6IG51bWJlciA9IDA7XG4gIHNjcm9sbERlbGF5OiBudW1iZXIgPSAyMDAwO1xuICB2aWV3ZXI/OiBWaWV3ZXJUeXBlO1xuXG4gIC8vIC0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3IoYXJnczogRHJpZnRvcnlBcmd1bWVudHMpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGFyZ3MuY29udGFpbmVyO1xuICAgIHRoaXMub25GcmFtZUNoYW5nZSA9IGFyZ3Mub25GcmFtZUNoYW5nZSB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLm9uQ29taWNMb2FkID0gYXJncy5vbkNvbWljTG9hZCB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLm9uRW5kID0gYXJncy5vbkVuZCB8fCBmdW5jdGlvbiAoKSB7fTtcblxuICAgIGlmIChhcmdzLk9wZW5TZWFkcmFnb24pIHtcbiAgICAgIE9wZW5TZWFkcmFnb24gPSBhcmdzLk9wZW5TZWFkcmFnb247XG4gICAgICB0aGlzLl9pbml0aWFsaXplKGFyZ3MpO1xuICAgICAgb3NkUmVxdWVzdD8ucmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3RlOiBsb2FkSnMgb25seSBsb2FkcyB0aGUgZmlsZSBvbmNlLCBldmVuIGlmIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgYW5kIGFsd2F5cyBtYWtlcyBzdXJlXG4gICAgICAvLyBhbGwgb2YgdGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkLlxuICAgICAgbG9hZEpzKFxuICAgICAgICAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9vcGVuc2VhZHJhZ29uQDIuNC9idWlsZC9vcGVuc2VhZHJhZ29uL29wZW5zZWFkcmFnb24ubWluLmpzJyxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIE9wZW5TZWFkcmFnb24gPSB3aW5kb3cuT3BlblNlYWRyYWdvbjtcbiAgICAgICAgICB0aGlzLl9pbml0aWFsaXplKGFyZ3MpO1xuICAgICAgICAgIG9zZFJlcXVlc3Q/LnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tXG4gIF9pbml0aWFsaXplKHsgY29udGFpbmVyLCBwcmVmaXhVcmwgfTogRHJpZnRvcnlBcmd1bWVudHMpIHtcbiAgICB0aGlzLnZpZXdlciA9XG4gICAgICBPcGVuU2VhZHJhZ29uICYmXG4gICAgICBPcGVuU2VhZHJhZ29uKHtcbiAgICAgICAgZWxlbWVudDogY29udGFpbmVyLFxuICAgICAgICBwcmVmaXhVcmw6IHByZWZpeFVybCxcbiAgICAgICAgc2hvd05hdmlnYXRpb25Db250cm9sOiBmYWxzZSxcbiAgICAgICAgbWF4Wm9vbVBpeGVsUmF0aW86IDEwLFxuICAgICAgICBnZXN0dXJlU2V0dGluZ3NNb3VzZToge1xuICAgICAgICAgIGNsaWNrVG9ab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGlmICh0aGlzLnZpZXdlcikge1xuICAgICAgdGhpcy52aWV3ZXIuYWRkSGFuZGxlcignY2FudmFzLWNsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LnF1aWNrIHx8ICFldmVudC5wb3NpdGlvbiB8fCAhdGhpcy52aWV3ZXIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb2ludCA9IHRoaXMudmlld2VyLnZpZXdwb3J0LnBvaW50RnJvbVBpeGVsKGV2ZW50LnBvc2l0aW9uKTtcbiAgICAgICAgbGV0IGZvdW5kSW5kZXggPSB0aGlzLl9nZXRIaXRGcmFtZShwb2ludCk7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIGNvbnN0IHJlYWxGcmFtZUluZGV4ID0gdGhpcy5fZmlndXJlRnJhbWVJbmRleCh0cnVlKTtcbiAgICAgICAgICBpZiAocmVhbEZyYW1lSW5kZXggPT09IC0xICYmIHRoaXMuZnJhbWVJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmdvVG9GcmFtZSh0aGlzLmZyYW1lSW5kZXgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdvVG9OZXh0RnJhbWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZm91bmRJbmRleCA9PT0gdGhpcy5mcmFtZUluZGV4KSB7XG4gICAgICAgICAgdGhpcy5nb1RvTmV4dEZyYW1lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5nb1RvRnJhbWUoZm91bmRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvcmlnaW5hbFNjcm9sbEhhbmRsZXIgPSB0aGlzLnZpZXdlci5pbm5lclRyYWNrZXIuc2Nyb2xsSGFuZGxlcjtcbiAgICAgIHRoaXMudmlld2VyLmlubmVyVHJhY2tlci5zY3JvbGxIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleSB8fFxuICAgICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQubWV0YUtleVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxTY3JvbGxIYW5kbGVyLmNhbGwodGhpcy52aWV3ZXI/LmlubmVyVHJhY2tlciwgZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQuc2Nyb2xsLCBub3csIG5vdyAtIHRoaXMubGFzdFNjcm9sbFRpbWUpO1xuICAgICAgICBpZiAobm93IC0gdGhpcy5sYXN0U2Nyb2xsVGltZSA8IHRoaXMuc2Nyb2xsRGVsYXkpIHtcbiAgICAgICAgICAvLyBSZXR1cm5pbmcgZmFsc2Ugc3RvcHMgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcgaXRzZWxmLlxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGFzdFNjcm9sbFRpbWUgPSBub3c7XG4gICAgICAgIGlmIChldmVudC5zY3JvbGwgPCAwKSB7XG4gICAgICAgICAgdGhpcy5nb1RvTmV4dEZyYW1lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5nb1RvUHJldmlvdXNGcmFtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuaW5nIGZhbHNlIHN0b3BzIHRoZSBicm93c2VyIGZyb20gc2Nyb2xsaW5nIGl0c2VsZi5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnQXJyb3dSaWdodCcgfHwgZXZlbnQua2V5ID09PSAnQXJyb3dEb3duJyB8fCBldmVudC5rZXkgPT09ICcgJykge1xuICAgICAgICAgIHRoaXMuZ29Ub05leHRGcmFtZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0Fycm93TGVmdCcgfHwgZXZlbnQua2V5ID09PSAnQXJyb3dVcCcpIHtcbiAgICAgICAgICB0aGlzLmdvVG9QcmV2aW91c0ZyYW1lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvcGVuQ29taWModW5zYWZlQ29taWM6IENvbWljIHwgc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuZnJhbWVzLmxlbmd0aCB8fCB0aGlzLmltYWdlSXRlbXMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnQ3VycmVudGx5IHRoZSBEcmlmdG9yeSB2aWV3ZXIgaXMgbm90IHNldCB1cCB0byBsb2FkIGEgc2Vjb25kIGNvbWljIGFmdGVyIHRoZSBmaXJzdC4nXG4gICAgICApO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb21pYyB9ID1cbiAgICAgIHR5cGVvZiB1bnNhZmVDb21pYyA9PT0gJ3N0cmluZycgPyAoSlNPTi5wYXJzZSh1bnNhZmVDb21pYykgYXMgQ29taWMpIDogdW5zYWZlQ29taWM7XG5cbiAgICBvc2RQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29taWMuYm9keS5iYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAgIGlmICh0aGlzLnZpZXdlcikge1xuICAgICAgICBpZiAoY29taWMuYm9keS5mcmFtZXMpIHtcbiAgICAgICAgICB0aGlzLmZyYW1lcyA9IGNvbWljLmJvZHkuZnJhbWVzLm1hcCgoZnJhbWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3BlblNlYWRyYWdvbiEuUmVjdChcbiAgICAgICAgICAgICAgZnJhbWUueCAtIGZyYW1lLndpZHRoIC8gMixcbiAgICAgICAgICAgICAgZnJhbWUueSAtIGZyYW1lLmhlaWdodCAvIDIsXG4gICAgICAgICAgICAgIGZyYW1lLndpZHRoLFxuICAgICAgICAgICAgICBmcmFtZS5oZWlnaHRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5mcmFtZXMgPSBjb21pYy5ib2R5Lml0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVuU2VhZHJhZ29uIS5SZWN0KFxuICAgICAgICAgICAgICBpdGVtLnggLSBpdGVtLndpZHRoIC8gMixcbiAgICAgICAgICAgICAgaXRlbS55IC0gaXRlbS5oZWlnaHQgLyAyLFxuICAgICAgICAgICAgICBpdGVtLndpZHRoLFxuICAgICAgICAgICAgICBpdGVtLmhlaWdodFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbWljLmJvZHkuaXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGltYWdlSXRlbTogSW1hZ2VJdGVtID0ge1xuICAgICAgICAgICAgaGlkZVVudGlsRnJhbWU6IGl0ZW0uaGlkZVVudGlsRnJhbWVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy5pbWFnZUl0ZW1zLnB1c2goaW1hZ2VJdGVtKTtcblxuICAgICAgICAgIHRoaXMudmlld2VyPy5hZGRUaWxlZEltYWdlKHtcbiAgICAgICAgICAgIHByZWxvYWQ6IHRydWUsXG4gICAgICAgICAgICB4OiBpdGVtLnggLSBpdGVtLndpZHRoIC8gMixcbiAgICAgICAgICAgIHk6IGl0ZW0ueSAtIGl0ZW0uaGVpZ2h0IC8gMixcbiAgICAgICAgICAgIHdpZHRoOiBpdGVtLndpZHRoLFxuICAgICAgICAgICAgc3VjY2VzczogKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgaW1hZ2VJdGVtLnRpbGVkSW1hZ2UgPSBldmVudC5pdGVtIGFzIE9wZW5TZWFkcmFnb24uVGlsZWRJbWFnZTtcbiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW1hZ2VWaXNpYmlsaXR5KCk7XG5cbiAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydENvbWljKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aWxlU291cmNlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdsZWdhY3ktaW1hZ2UtcHlyYW1pZCcsXG4gICAgICAgICAgICAgIGxldmVsczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHVybDogaXRlbS51cmwsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaXRlbS53aWR0aCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogaXRlbS5oZWlnaHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tXG4gIF9zdGFydENvbWljKCkge1xuICAgIGNvbnN0IGZyYW1lSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYW1lSW5kZXggPSB0aGlzLl9maWd1cmVGcmFtZUluZGV4KGZhbHNlKTtcbiAgICAgIGlmIChmcmFtZUluZGV4ICE9PSAtMSAmJiBmcmFtZUluZGV4ICE9PSB0aGlzLmZyYW1lSW5kZXgpIHtcbiAgICAgICAgdGhpcy5mcmFtZUluZGV4ID0gZnJhbWVJbmRleDtcbiAgICAgICAgdGhpcy5fdXBkYXRlSW1hZ2VWaXNpYmlsaXR5KCk7XG5cbiAgICAgICAgaWYgKHRoaXMub25GcmFtZUNoYW5nZSkge1xuICAgICAgICAgIHRoaXMub25GcmFtZUNoYW5nZSh7XG4gICAgICAgICAgICBmcmFtZUluZGV4LFxuICAgICAgICAgICAgaXNMYXN0RnJhbWU6IGZyYW1lSW5kZXggPT09IHRoaXMuZ2V0RnJhbWVDb3VudCgpIC0gMVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0aGlzLnZpZXdlcikge1xuICAgICAgdGhpcy52aWV3ZXIuYWRkSGFuZGxlcignem9vbScsIGZyYW1lSGFuZGxlcik7XG4gICAgICB0aGlzLnZpZXdlci5hZGRIYW5kbGVyKCdwYW4nLCBmcmFtZUhhbmRsZXIpO1xuICAgIH1cblxuICAgIHRoaXMuZ29Ub0ZyYW1lKDApO1xuXG4gICAgaWYgKHRoaXMub25Db21pY0xvYWQpIHtcbiAgICAgIHRoaXMub25Db21pY0xvYWQoe30pO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS1cbiAgX3VwZGF0ZUltYWdlVmlzaWJpbGl0eSgpIHtcbiAgICB0aGlzLmltYWdlSXRlbXMuZm9yRWFjaCgoaW1hZ2VJdGVtKSA9PiB7XG4gICAgICBpZiAoaW1hZ2VJdGVtLmhpZGVVbnRpbEZyYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW1hZ2VJdGVtLnRpbGVkSW1hZ2U/LnNldE9wYWNpdHkodGhpcy5mcmFtZUluZGV4IDwgaW1hZ2VJdGVtLmhpZGVVbnRpbEZyYW1lID8gMCA6IDEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLVxuICBnb1RvRnJhbWUoaW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmdldEZyYW1lSW5kZXgoKSAhPT0gaW5kZXgpIHtcbiAgICAgIHZhciBmcmFtZSA9IHRoaXMuZnJhbWVzW2luZGV4XTtcbiAgICAgIHZhciBidWZmZXJGYWN0b3IgPSAwLjI7XG4gICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgdmFyIGJveCA9IGZyYW1lLmNsb25lKCk7XG5cbiAgICAgICAgYm94LndpZHRoICo9IDEgKyBidWZmZXJGYWN0b3I7XG4gICAgICAgIGJveC5oZWlnaHQgKj0gMSArIGJ1ZmZlckZhY3RvcjtcbiAgICAgICAgYm94LnggLT0gZnJhbWUud2lkdGggKiBidWZmZXJGYWN0b3IgKiAwLjU7XG4gICAgICAgIGJveC55IC09IGZyYW1lLmhlaWdodCAqIGJ1ZmZlckZhY3RvciAqIDAuNTtcblxuICAgICAgICB0aGlzLnZpZXdlcj8udmlld3BvcnQuZml0Qm91bmRzKGJveCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLVxuICBnZXRGcmFtZUluZGV4KCkge1xuICAgIHJldHVybiB0aGlzLmZyYW1lSW5kZXg7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tXG4gIF9maWd1cmVGcmFtZUluZGV4KGN1cnJlbnQ6IGJvb2xlYW4pIHtcbiAgICBsZXQgYmVzdEluZGV4ID0gLTE7XG4gICAgbGV0IGJlc3REaXN0YW5jZSA9IEluZmluaXR5O1xuICAgIGlmICh0aGlzLnZpZXdlcikge1xuICAgICAgY29uc3Qgdmlld3BvcnRCb3VuZHMgPSB0aGlzLnZpZXdlci52aWV3cG9ydC5nZXRCb3VuZHMoY3VycmVudCk7XG4gICAgICBjb25zdCB2aWV3cG9ydENlbnRlciA9IHZpZXdwb3J0Qm91bmRzLmdldENlbnRlcigpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5mcmFtZXNbaV07XG4gICAgICAgIGlmIChmcmFtZS5jb250YWluc1BvaW50KHZpZXdwb3J0Q2VudGVyKSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdmlld3BvcnRDZW50ZXIuc3F1YXJlZERpc3RhbmNlVG8oZnJhbWUuZ2V0Q2VudGVyKCkpO1xuICAgICAgICAgIGlmIChkaXN0YW5jZSA8IGJlc3REaXN0YW5jZSkge1xuICAgICAgICAgICAgYmVzdERpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYmVzdEluZGV4O1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLVxuICBfZ2V0SGl0RnJhbWUocG9pbnQ6IE9wZW5TZWFkcmFnb24uUG9pbnQpIHtcbiAgICBpZiAodGhpcy52aWV3ZXIpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLmZyYW1lc1tpXTtcbiAgICAgICAgaWYgKGZyYW1lLmNvbnRhaW5zUG9pbnQocG9pbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tXG4gIGdldEZyYW1lQ291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJhbWVzLmxlbmd0aDtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS1cbiAgZ29Ub05leHRGcmFtZSgpIHtcbiAgICBsZXQgaW5kZXggPSB0aGlzLmdldEZyYW1lSW5kZXgoKTtcbiAgICBpZiAoaW5kZXggPCB0aGlzLmZyYW1lcy5sZW5ndGggLSAxKSB7XG4gICAgICB0aGlzLmdvVG9GcmFtZShpbmRleCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uRW5kKHt9KTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tXG4gIGdvVG9QcmV2aW91c0ZyYW1lKCkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0RnJhbWVJbmRleCgpO1xuICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgIHRoaXMuZ29Ub0ZyYW1lKGluZGV4IC0gMSk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBUeXBlIGRlZmluaXRpb25zIGlzIGEgbWFudWFsIGNvcHkgb2YgQHR5cGVzL29wZW5zZWFkcmFnb25cblxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgT3BlblNlYWRyYWdvbiAyLjRcbi8vIFByb2plY3Q6IGh0dHBzOi8vb3BlbnNlYWRyYWdvbi5naXRodWIuaW8vXG4vLyBEZWZpbml0aW9ucyBieTogIMOBbHZhcm8gTWFydMOtbmV6IDxodHRwczovL2dpdGh1Yi5jb20vYWx2YXJvbWFydG1hcnQ+XG4vLyAgICAgICAgICAgICAgICAgIFJvYmVydFlvc3QgPGh0dHBzOi8vZ2l0aHViLmNvbS9Sb2JlcnRZb3N0PlxuLy8gICAgICAgICAgICAgICAgICBKYXNwZXIgU3RhYWIgPGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhYWI+XG4vLyAgICAgICAgICAgICAgICAgIEtyaXN0aW4gUnViZW4gPGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlzdGlucnViZW4+XG4vLyAgICAgICAgICAgICAgICAgIEdlb2ZmIEhhcnBlciA8aHR0cHM6Ly9naXRodWIuY29tL2dlb2ZmLWhhcnBlcj5cbi8vICAgICAgICAgICAgICAgICAgSnVzdGluIDxodHRwczovL2dpdGh1Yi5jb20vanVzdGluY3k+XG4vLyAgICAgICAgICAgICAgICAgIFBldGVyIEJsYXplamV3aWN6IDxodHRwczovL2dpdGh1Yi5jb20vcGV0ZXJibGF6ZWpld2ljej5cbi8vIERlZmluaXRpb25zOiBodHRwczovL2dpdGh1Yi5jb20vYWx2YXJvbWFydG1hcnQvdHlwZXMtb3BlbnNlYWRyYWdvblxuLy8gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjFcbmRlY2xhcmUgbmFtZXNwYWNlIE9wZW5TZWFkcmFnb24ge1xuICBjbGFzcyBCcm93c2VyIHtcbiAgICB2ZW5kb3I6IEJST1dTRVJTO1xuICAgIHZlcnNpb246IG51bWJlcjtcbiAgICBhbHBoYTogYm9vbGVhbjtcbiAgfVxuXG4gIGVudW0gQlJPV1NFUlMge1xuICAgIFVOS05PV04gPSAwLFxuICAgIElFID0gMSxcbiAgICBGSVJFRk9YID0gMixcbiAgICBTQUZBUkkgPSAzLFxuICAgIENIUk9NRSA9IDQsXG4gICAgT1BFUkEgPSA1XG4gIH1cblxuICBlbnVtIEJ1dHRvblN0YXRlIHtcbiAgICBSRVNULFxuICAgIEdST1VQLFxuICAgIEhPVkVSLFxuICAgIERPV05cbiAgfVxuXG4gIGVudW0gQ29udHJvbEFuY2hvciB7XG4gICAgTk9ORSxcbiAgICBUT1BfTEVGVCxcbiAgICBUT1BfUklHSFQsXG4gICAgQk9UVE9NX0xFRlQsXG4gICAgQk9UVE9NX1JJR0hULFxuICAgIEFCU09MVVRFXG4gIH1cblxuICBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBPcHRpb25zO1xuXG4gIGNvbnN0IGZ1bGxTY3JlZW5BcGk6IHtcbiAgICBzdXBwb3J0c0Z1bGxTY3JlZW46IGJvb2xlYW47XG4gICAgaXNGdWxsU2NyZWVuOiAoKSA9PiBib29sZWFuO1xuICAgIGdldEZ1bGxTY3JlZW5FbGVtZW50OiAoKSA9PiBIVE1MRWxlbWVudDtcbiAgICByZXF1ZXN0RnVsbFNjcmVlbjogKCkgPT4gdm9pZDtcbiAgICBleGl0RnVsbFNjcmVlbjogKCkgPT4gdm9pZDtcbiAgICBjYW5jZWxGdWxsU2NyZWVuOiAoKSA9PiB2b2lkO1xuICAgIGZ1bGxTY3JlZW5FdmVudE5hbWU6IHN0cmluZztcbiAgICBmdWxsU2NyZWVuRXJyb3JFdmVudE5hbWU6IHN0cmluZztcbiAgfTtcblxuICBlbnVtIE92ZXJsYXlQbGFjZW1lbnQge1xuICAgIENFTlRFUixcbiAgICBUT1BfTEVGVCxcbiAgICBUT1AsXG4gICAgVE9QX1JJR0hULFxuICAgIFJJR0hULFxuICAgIEJPVFRPTV9SSUdIVCxcbiAgICBCT1RUT00sXG4gICAgQk9UVE9NX0xFRlQsXG4gICAgTEVGVFxuICB9XG5cbiAgZW51bSBPdmVybGF5Um90YXRpb25Nb2RlIHtcbiAgICBOT19ST1RBVElPTixcbiAgICBFWEFDVCxcbiAgICBCT1VORElOR19CT1hcbiAgfVxuXG4gIGxldCBwaXhlbERlbnNpdHlSYXRpbzogbnVtYmVyO1xuXG4gIGVudW0gUGxhY2VtZW50IHtcbiAgICBDRU5URVIsXG4gICAgVE9QX0xFRlQsXG4gICAgVE9QLFxuICAgIFRPUF9SSUdIVCxcbiAgICBSSUdIVCxcbiAgICBCT1RUT01fUklHSFQsXG4gICAgQk9UVE9NLFxuICAgIEJPVFRPTV9MRUZULFxuICAgIExFRlRcbiAgfVxuXG4gIGxldCBzdXBwb3J0c0NhbnZhczogYm9vbGVhbjtcblxuICBsZXQgdmVyc2lvbjoge1xuICAgIHZlcnNpb25TdHI6IHN0cmluZztcbiAgICBtYWpvcjogbnVtYmVyO1xuICAgIG1pbm9yOiBudW1iZXI7XG4gICAgcmV2aXNpb246IG51bWJlcjtcbiAgfTtcblxuICBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50OiBFbGVtZW50IHwgc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQ7XG5cbiAgZnVuY3Rpb24gYWRkRXZlbnQoXG4gICAgZWxlbWVudDogRWxlbWVudCB8IHN0cmluZyxcbiAgICBldmVudE5hbWU6IHN0cmluZyxcbiAgICBoYW5kbGVyOiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkLFxuICAgIHVzZUNhcHR1cmU/OiBib29sZWFuXG4gICk6IHZvaWQ7XG5cbiAgZnVuY3Rpb24gY2FuY2VsRXZlbnQoZXZlbnQ/OiBPU0RFdmVudDxhbnk+KTogdm9pZDtcblxuICBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIodmFsdWU6IHN0cmluZyk6IHN0cmluZztcblxuICBmdW5jdGlvbiBjcmVhdGVDYWxsYmFjayhcbiAgICBvYmplY3Q6IG9iamVjdCxcbiAgICBtZXRob2Q6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCxcbiAgICAuLi5hcmdzOiBhbnlbXVxuICApOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbiAgZnVuY3Rpb24gZGVsZWdhdGUoXG4gICAgb2JqZWN0OiBvYmplY3QsXG4gICAgbWV0aG9kOiAoLi4uYXJnczogYW55W10pID0+IHZvaWRcbiAgKTogKG9iamVjdDogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDsgLy8gUkVWSUVXOiB1bnN1cmUgb2YgcmV0dXJuIHR5cGVcblxuICBmdW5jdGlvbiBleHRlbmQoKTogYW55O1xuXG4gIGZ1bmN0aW9uIGdldENzc1Byb3BlcnR5V2l0aFZlbmRvclByZWZpeChwcm9wZXJ0eTogc3RyaW5nKTogc3RyaW5nO1xuXG4gIGZ1bmN0aW9uIGdldEVsZW1lbnQoZWxlbWVudDogc3RyaW5nIHwgRWxlbWVudCk6IEVsZW1lbnQ7XG5cbiAgZnVuY3Rpb24gZ2V0RWxlbWVudE9mZnNldChlbGVtZW50OiBFbGVtZW50IHwgc3RyaW5nKTogUG9pbnQ7XG5cbiAgZnVuY3Rpb24gZ2V0RWxlbWVudFBvc2l0aW9uKGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcpOiBQb2ludDtcblxuICBmdW5jdGlvbiBnZXRFbGVtZW50U2l6ZShlbGVtZW50OiBFbGVtZW50IHwgc3RyaW5nKTogUG9pbnQ7XG5cbiAgZnVuY3Rpb24gZ2V0RWxlbWVudFN0eWxlKGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcpOiBhbnk7IC8vIENTU1N0eWxlP1xuXG4gIGZ1bmN0aW9uIGdldE1vdXNlUG9zaXRpb24oZXZlbnQ/OiBPU0RFdmVudDxhbnk+KTogUG9pbnQ7XG5cbiAgZnVuY3Rpb24gZ2V0UGFnZVNjcm9sbCgpOiBQb2ludDtcblxuICBmdW5jdGlvbiBnZXRTdHJpbmcocHJvcGVydHk6IHN0cmluZyk6IHN0cmluZztcblxuICBmdW5jdGlvbiBnZXRVcmxQYXJhbWV0ZXIoa2V5OiBzdHJpbmcpOiBzdHJpbmc7XG5cbiAgZnVuY3Rpb24gZ2V0V2luZG93U2l6ZSgpOiBQb2ludDtcblxuICBmdW5jdGlvbiBpbWFnZUZvcm1hdFN1cHBvcnRlZChleHRlbnNpb24/OiBzdHJpbmcpOiBib29sZWFuO1xuXG4gIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXk6IGFueVtdLCBzZWFyY2hFbGVtZW50OiBvYmplY3QsIGZyb21JbmRleD86IG51bWJlcik6IG51bWJlcjtcblxuICAvLyAobWlzc2luZyBqcXVlcnkgZnVuY3Rpb25zKVxuXG4gIGZ1bmN0aW9uIG1ha2VBamF4UmVxdWVzdChvcHRpb25zOiB7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgc3VjY2VzczogKG9iajogb2JqZWN0KSA9PiB2b2lkO1xuICAgIGVycm9yOiAob2JqOiBvYmplY3QpID0+IHZvaWQ7XG4gICAgaGVhZGVyczogb2JqZWN0O1xuICAgIHJlc3BvbnNlVHlwZTogc3RyaW5nO1xuICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gIH0pOiBYTUxIdHRwUmVxdWVzdDtcblxuICBmdW5jdGlvbiBtYWtlQ2VudGVyZWROb2RlKGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcpOiBFbGVtZW50O1xuXG4gIGZ1bmN0aW9uIG1ha2VOZXV0cmFsRWxlbWVudCh0YWdOYW1lOiBzdHJpbmcpOiBFbGVtZW50O1xuXG4gIGZ1bmN0aW9uIG1ha2VUcmFuc3BhcmVudEltYWdlKHNyYzogc3RyaW5nKTogRWxlbWVudDtcblxuICBmdW5jdGlvbiBub3coKTogbnVtYmVyO1xuXG4gIGZ1bmN0aW9uIHBhcnNlSlNPTihzdHJpbmc6IHN0cmluZyk6IG9iamVjdDtcblxuICBmdW5jdGlvbiBwYXJzZVhtbChzdHJpbmc6IHN0cmluZyk6IERvY3VtZW50O1xuXG4gIGZ1bmN0aW9uIHBvaW50SW5FbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcsIHBvaW50OiBQb2ludCk6IGJvb2xlYW47XG5cbiAgZnVuY3Rpb24gcG9zaXRpdmVNb2R1bG8obnVtYmVyOiBudW1iZXIsIG1vZHVsbzogbnVtYmVyKTogbnVtYmVyO1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKTogdm9pZDtcblxuICBmdW5jdGlvbiByZW1vdmVFdmVudChcbiAgICBlbGVtZW50OiBFbGVtZW50IHwgc3RyaW5nLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxhbnk+LFxuICAgIHVzZUNhcHR1cmU/OiBib29sZWFuXG4gICk6IHZvaWQ7XG5cbiAgZnVuY3Rpb24gc2V0RWxlbWVudE9wYWNpdHkoZWxlbWVudDogRWxlbWVudCB8IHN0cmluZywgb3BhY2l0eTogbnVtYmVyLCB1c2VzQWxwaGE/OiBib29sZWFuKTogdm9pZDtcblxuICBmdW5jdGlvbiBzZXRFbGVtZW50VG91Y2hBY3Rpb25Ob25lKGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmcpOiB2b2lkO1xuXG4gIGZ1bmN0aW9uIHNldFBhZ2VTY3JvbGwocG9pbnQ6IFBvaW50KTogdm9pZDtcblxuICBmdW5jdGlvbiBzZXRTdHJpbmcocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG5cbiAgZnVuY3Rpb24gc3RvcEV2ZW50KGV2ZW50PzogT1NERXZlbnQ8YW55Pik6IHZvaWQ7XG5cbiAgaW50ZXJmYWNlIEdlc3R1cmVTZXR0aW5ncyB7XG4gICAgc2Nyb2xsVG9ab29tPzogYm9vbGVhbjtcbiAgICBjbGlja1RvWm9vbT86IGJvb2xlYW47XG4gICAgZGJsQ2xpY2tUb1pvb20/OiBib29sZWFuO1xuICAgIHBpbmNoVG9ab29tPzogYm9vbGVhbjtcbiAgICBmbGlja0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGZsaWNrTWluU3BlZWQ/OiBudW1iZXI7XG4gICAgZmxpY2tNb21lbnR1bT86IG51bWJlcjtcbiAgfVxuXG4gIGludGVyZmFjZSBOYXZJbWFnZXNWYWx1ZXMge1xuICAgIFJFU1Q6IHN0cmluZztcbiAgICBHUk9VUDogc3RyaW5nO1xuICAgIEhPVkVSOiBzdHJpbmc7XG4gICAgRE9XTjogc3RyaW5nO1xuICB9XG4gIGludGVyZmFjZSBOYXZJbWFnZXMge1xuICAgIHpvb21JbjogTmF2SW1hZ2VzVmFsdWVzO1xuICAgIHpvb21PdXQ6IE5hdkltYWdlc1ZhbHVlcztcbiAgICBob21lOiBOYXZJbWFnZXNWYWx1ZXM7XG4gICAgZnVsbHBhZ2U6IE5hdkltYWdlc1ZhbHVlcztcbiAgICByb3RhdGVsZWZ0OiBOYXZJbWFnZXNWYWx1ZXM7XG4gICAgcm90YXRlcmlnaHQ6IE5hdkltYWdlc1ZhbHVlcztcbiAgICBmbGlwOiBOYXZJbWFnZXNWYWx1ZXM7XG4gICAgcHJldmlvdXM6IE5hdkltYWdlc1ZhbHVlcztcbiAgICBuZXh0OiBOYXZJbWFnZXNWYWx1ZXM7XG4gIH1cblxuICBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgZWxlbWVudD86IEhUTUxFbGVtZW50O1xuICAgIHRpbGVTb3VyY2VzPzpcbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IHN0cmluZ1tdXG4gICAgICB8IFRpbGVTb3VyY2VbXVxuICAgICAgfCBUaWxlU291cmNlT3B0aW9uc1xuICAgICAgfCB7XG4gICAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICAgIGxldmVsczogQXJyYXk8e1xuICAgICAgICAgICAgdXJsOiBzdHJpbmc7XG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgICAgfT47XG4gICAgICAgIH1cbiAgICAgIHwge1xuICAgICAgICAgIEltYWdlOiB7XG4gICAgICAgICAgICB4bWxucz86IHN0cmluZztcbiAgICAgICAgICAgIFVybDogc3RyaW5nO1xuICAgICAgICAgICAgRm9ybWF0OiBzdHJpbmc7XG4gICAgICAgICAgICBPdmVybGFwOiBzdHJpbmc7XG4gICAgICAgICAgICBUaWxlU2l6ZTogc3RyaW5nO1xuICAgICAgICAgICAgU2l6ZToge1xuICAgICAgICAgICAgICBXaWR0aDogc3RyaW5nO1xuICAgICAgICAgICAgICBIZWlnaHQ6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB0YWJJbmRleD86IG51bWJlcjtcbiAgICBvdmVybGF5cz86IGFueVtdO1xuICAgIHByZWZpeFVybD86IHN0cmluZztcbiAgICBuYXZJbWFnZXM/OiBOYXZJbWFnZXM7XG4gICAgZGVidWdNb2RlPzogYm9vbGVhbjtcbiAgICBkZWJ1Z0dyaWRDb2xvcj86IHN0cmluZ1tdO1xuICAgIGJsZW5kVGltZT86IG51bWJlcjtcbiAgICBhbHdheXNCbGVuZD86IGJvb2xlYW47XG4gICAgYXV0b0hpZGVDb250cm9scz86IGJvb2xlYW47XG4gICAgaW1tZWRpYXRlUmVuZGVyPzogYm9vbGVhbjtcbiAgICBkZWZhdWx0Wm9vbUxldmVsPzogbnVtYmVyO1xuICAgIG9wYWNpdHk/OiBudW1iZXI7XG4gICAgcHJlbG9hZD86IGJvb2xlYW47XG4gICAgY29tcG9zaXRlT3BlcmF0aW9uPzpcbiAgICAgIHwgJ3NvdXJjZS1vdmVyJ1xuICAgICAgfCAnc291cmNlLWF0b3AnXG4gICAgICB8ICdzb3VyY2UtaW4nXG4gICAgICB8ICdzb3VyY2Utb3V0J1xuICAgICAgfCAnZGVzdGluYXRpb24tb3ZlcidcbiAgICAgIHwgJ2Rlc3RpbmF0aW9uLWF0b3AnXG4gICAgICB8ICdkZXN0aW5hdGlvbi1pbidcbiAgICAgIHwgJ2Rlc3RpbmF0aW9uLW91dCdcbiAgICAgIHwgJ2xpZ2h0ZXInXG4gICAgICB8ICdjb3B5J1xuICAgICAgfCAneG9yJztcbiAgICBwbGFjZWhvbGRlckZpbGxTdHlsZT86IHN0cmluZyB8IENhbnZhc0dyYWRpZW50IHwgQ2FudmFzUGF0dGVybjtcbiAgICBkZWdyZWVzPzogbnVtYmVyO1xuICAgIGZsaXBwZWQ/OiBib29sZWFuO1xuICAgIG1pblpvb21MZXZlbD86IG51bWJlcjtcbiAgICBtYXhab29tTGV2ZWw/OiBudW1iZXI7XG4gICAgaG9tZUZpbGxzVmlld2VyPzogYm9vbGVhbjtcbiAgICBwYW5Ib3Jpem9udGFsPzogYm9vbGVhbjtcbiAgICBwYW5WZXJ0aWNhbD86IGJvb2xlYW47XG4gICAgY29uc3RyYWluRHVyaW5nUGFuPzogYm9vbGVhbjtcbiAgICB3cmFwSG9yaXpvbnRhbD86IGJvb2xlYW47XG4gICAgd3JhcFZlcnRpY2FsPzogYm9vbGVhbjtcbiAgICBtaW5ab29tSW1hZ2VSYXRpbz86IG51bWJlcjtcbiAgICBtYXhab29tUGl4ZWxSYXRpbz86IG51bWJlcjtcbiAgICBzbW9vdGhUaWxlRWRnZXNNaW5ab29tPzogbnVtYmVyO1xuICAgIGlPU0RldmljZT86IGJvb2xlYW47XG4gICAgYXV0b1Jlc2l6ZT86IGJvb2xlYW47XG4gICAgcHJlc2VydmVJbWFnZVNpemVPblJlc2l6ZT86IGJvb2xlYW47XG4gICAgbWluU2Nyb2xsRGVsdGFUaW1lPzogbnVtYmVyO1xuICAgIHBpeGVsc1BlcldoZWVsTGluZT86IG51bWJlcjtcbiAgICBwaXhlbHNQZXJBcnJvd1ByZXNzPzogbnVtYmVyO1xuICAgIHZpc2liaWxpdHlSYXRpbz86IG51bWJlcjtcbiAgICB2aWV3cG9ydE1hcmdpbnM/OiBvYmplY3Q7XG4gICAgaW1hZ2VMb2FkZXJMaW1pdD86IG51bWJlcjtcbiAgICBjbGlja1RpbWVUaHJlc2hvbGQ/OiBudW1iZXI7XG4gICAgY2xpY2tEaXN0VGhyZXNob2xkPzogbnVtYmVyO1xuICAgIGRibENsaWNrVGltZVRocmVzaG9sZD86IG51bWJlcjtcbiAgICBkYmxDbGlja0Rpc3RUaHJlc2hvbGQ/OiBudW1iZXI7XG4gICAgc3ByaW5nU3RpZmZuZXNzPzogbnVtYmVyO1xuICAgIGFuaW1hdGlvblRpbWU/OiBudW1iZXI7XG4gICAgZ2VzdHVyZVNldHRpbmdzTW91c2U/OiBHZXN0dXJlU2V0dGluZ3M7XG4gICAgZ2VzdHVyZVNldHRpbmdzVG91Y2g/OiBHZXN0dXJlU2V0dGluZ3M7XG4gICAgZ2VzdHVyZVNldHRpbmdzUGVuPzogR2VzdHVyZVNldHRpbmdzO1xuICAgIGdlc3R1cmVTZXR0aW5nc1Vua25vd24/OiBHZXN0dXJlU2V0dGluZ3M7XG4gICAgem9vbVBlckNsaWNrPzogbnVtYmVyO1xuICAgIHpvb21QZXJTY3JvbGw/OiBudW1iZXI7XG4gICAgem9vbVBlclNlY29uZD86IG51bWJlcjtcbiAgICBzaG93TmF2aWdhdG9yPzogYm9vbGVhbjtcbiAgICBuYXZpZ2F0b3JJZD86IHN0cmluZztcbiAgICBuYXZpZ2F0b3JQb3NpdGlvbj86ICdUT1BfTEVGVCcgfCAnVE9QX1JJR0hUJyB8ICdCT1RUT01fTEVGVCcgfCAnQk9UVE9NX1JJR0hUJyB8ICdBQlNPTFVURSc7XG4gICAgbmF2aWdhdG9yU2l6ZVJhdGlvPzogbnVtYmVyO1xuICAgIG5hdmlnYXRvck1haW50YWluU2l6ZVJhdGlvPzogYm9vbGVhbjtcbiAgICBuYXZpZ2F0b3JUb3A/OiBudW1iZXIgfCBzdHJpbmc7XG4gICAgbmF2aWdhdG9yTGVmdD86IG51bWJlciB8IHN0cmluZztcbiAgICBuYXZpZ2F0b3JIZWlnaHQ/OiBudW1iZXIgfCBzdHJpbmc7XG4gICAgbmF2aWdhdG9yV2lkdGg/OiBudW1iZXIgfCBzdHJpbmc7XG4gICAgbmF2aWdhdG9yQXV0b1Jlc2l6ZT86IGJvb2xlYW47XG4gICAgbmF2aWdhdG9yQXV0b0ZhZGU/OiBib29sZWFuO1xuICAgIG5hdmlnYXRvclJvdGF0ZT86IGJvb2xlYW47XG4gICAgbmF2aWdhdG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICBuYXZpZ2F0b3JPcGFjaXR5PzogbnVtYmVyO1xuICAgIG5hdmlnYXRvckJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgIG5hdmlnYXRvckRpc3BsYXlSZWdpb25Db2xvcj86IHN0cmluZztcbiAgICBjb250cm9sc0ZhZGVEZWxheT86IG51bWJlcjtcbiAgICBjb250cm9sc0ZhZGVMZW5ndGg/OiBudW1iZXI7XG4gICAgbWF4SW1hZ2VDYWNoZUNvdW50PzogbnVtYmVyO1xuICAgIHRpbWVvdXQ/OiBudW1iZXI7XG4gICAgdXNlQ2FudmFzPzogYm9vbGVhbjtcbiAgICBtaW5QaXhlbFJhdGlvPzogbnVtYmVyO1xuICAgIG1vdXNlTmF2RW5hYmxlZD86IG51bWJlcjtcbiAgICBzaG93TmF2aWdhdGlvbkNvbnRyb2w/OiBib29sZWFuO1xuICAgIG5hdmlnYXRpb25Db250cm9sQW5jaG9yPzogQ29udHJvbEFuY2hvcjtcbiAgICBzaG93Wm9vbUNvbnRyb2w/OiBib29sZWFuO1xuICAgIHNob3dIb21lQ29udHJvbD86IGJvb2xlYW47XG4gICAgc2hvd0Z1bGxQYWdlQ29udHJvbD86IGJvb2xlYW47XG4gICAgc2hvd1JvdGF0aW9uQ29udHJvbD86IGJvb2xlYW47XG4gICAgc2hvd0ZsaXBDb250cm9sPzogYm9vbGVhbjtcbiAgICBzaG93U2VxdWVuY2VDb250cm9sPzogYm9vbGVhbjtcbiAgICBzZXF1ZW5jZUNvbnRyb2xBbmNob3I/OiBDb250cm9sQW5jaG9yO1xuICAgIG5hdlByZXZOZXh0V3JhcD86IGJvb2xlYW47XG4gICAgem9vbUluQnV0dG9uPzogc3RyaW5nO1xuICAgIHpvb21PdXRCdXR0b24/OiBzdHJpbmc7XG4gICAgaG9tZUJ1dHRvbj86IHN0cmluZztcbiAgICBmdWxsUGFnZUJ1dHRvbj86IHN0cmluZztcbiAgICByb3RhdGVMZWZ0QnV0dG9uPzogc3RyaW5nO1xuICAgIHJvdGF0ZVJpZ2h0QnV0dG9uPzogc3RyaW5nO1xuICAgIHByZXZpb3VzQnV0dG9uPzogc3RyaW5nO1xuICAgIG5leHRCdXR0b24/OiBzdHJpbmc7XG4gICAgc2VxdWVuY2VNb2RlPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBJZiBzZXF1ZW5jZU1vZGUgaXMgdHJ1ZSwgZGlzcGxheSB0aGlzIHBhZ2UgaW5pdGlhbGx5LlxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICBpbml0aWFsUGFnZT86IG51bWJlcjtcbiAgICBwcmVzZXJ2ZVZpZXdwb3J0PzogYm9vbGVhbjtcbiAgICBwcmVzZXJ2ZU92ZXJsYXlzPzogYm9vbGVhbjtcbiAgICBzaG93UmVmZXJlbmNlU3RyaXA/OiBib29sZWFuO1xuICAgIHJlZmVyZW5jZVN0cmlwU2Nyb2xsPzogc3RyaW5nO1xuICAgIHJlZmVyZW5jZVN0cmlwRWxlbWVudD86IEhUTUxFbGVtZW50O1xuICAgIHJlZmVyZW5jZVN0cmlwSGVpZ2h0PzogbnVtYmVyO1xuICAgIHJlZmVyZW5jZVN0cmlwV2lkdGg/OiBudW1iZXI7XG4gICAgcmVmZXJlbmNlU3RyaXBQb3NpdGlvbj86IHN0cmluZztcbiAgICByZWZlcmVuY2VTdHJpcFNpemVSYXRpbz86IG51bWJlcjtcbiAgICBjb2xsZWN0aW9uTW9kZT86IGJvb2xlYW47XG4gICAgY29sbGVjdGlvblJvd3M/OiBudW1iZXI7XG4gICAgY29sbGVjdGlvbkNvbHVtbnM/OiBudW1iZXI7XG4gICAgY29sbGVjdGlvbkxheW91dD86ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCc7XG4gICAgY29sbGVjdGlvblRpbGVTaXplPzogbnVtYmVyO1xuICAgIGNvbGxlY3Rpb25UaWxlTWFyZ2luPzogbnVtYmVyO1xuICAgIGNyb3NzT3JpZ2luUG9saWN5PzogJ0Fub255bW91cycgfCAndXNlLWNyZWRlbnRpYWxzJyB8IGZhbHNlO1xuICAgIGFqYXhXaXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIGxvYWRUaWxlc1dpdGhBamF4PzogYm9vbGVhbjtcbiAgICBhamF4SGVhZGVycz86IG9iamVjdDtcbiAgICBpbWFnZVNtb290aGluZ0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIHJvdGF0aW9uSW5jcmVtZW50PzogbnVtYmVyO1xuICB9XG5cbiAgaW50ZXJmYWNlIFRpbGVTb3VyY2VPcHRpb25zIHtcbiAgICB1cmw/OiBzdHJpbmc7XG4gICAgcmVmZXJlbmNlU3RyaXBUaHVtYm5haWxVcmw/OiBzdHJpbmc7XG4gICAgc3VjY2Vzcz86IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG4gICAgYWpheFdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgYWpheEhlYWRlcnM/OiBvYmplY3Q7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIHRpbGVTaXplPzogbnVtYmVyO1xuICAgIHRpbGVXaWR0aD86IG51bWJlcjtcbiAgICB0aWxlSGVpZ2h0PzogbnVtYmVyO1xuICAgIHRpbGVPdmVybGFwPzogbnVtYmVyO1xuICAgIG1pbkxldmVsPzogbnVtYmVyO1xuICAgIG1heExldmVsPzogbnVtYmVyO1xuICAgIGdldFRpbGVVcmw/OiAobDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gc3RyaW5nO1xuICB9XG5cbiAgY2xhc3MgQnV0dG9uIGV4dGVuZHMgRXZlbnRTb3VyY2Uge1xuICAgIGN1cnJlbnRTdGF0ZTogQnV0dG9uU3RhdGU7XG4gICAgZWxlbWVudDogRWxlbWVudDtcbiAgICBmYWRlRGVsYXk6IG51bWJlcjtcbiAgICBmYWRlTGVuZ3RoOiBudW1iZXI7XG4gICAgdHJhY2tlcjogTW91c2VUcmFja2VyO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1xuICAgICAgZWxlbWVudD86IEVsZW1lbnQ7XG4gICAgICB0b29sdGlwPzogc3RyaW5nO1xuICAgICAgc3JjUmVzdD86IHN0cmluZztcbiAgICAgIHNyY0dyb3VwPzogc3RyaW5nO1xuICAgICAgc3JjSG92ZXI/OiBzdHJpbmc7XG4gICAgICBzcmNEb3duPzogc3RyaW5nO1xuICAgICAgZmFkZURlbGF5PzogbnVtYmVyO1xuICAgICAgZmFkZUxlbmd0aD86IG51bWJlcjtcbiAgICAgIG9uUHJlc3M/OiBFdmVudEhhbmRsZXI8QnV0dG9uRXZlbnQ+O1xuICAgICAgb25SZWxlYXNlPzogRXZlbnRIYW5kbGVyPEJ1dHRvbkV2ZW50PjtcbiAgICAgIG9uQ2xpY2s/OiBFdmVudEhhbmRsZXI8QnV0dG9uRXZlbnQ+O1xuICAgICAgb25FbnRlcj86IEV2ZW50SGFuZGxlcjxCdXR0b25FdmVudD47XG4gICAgICBvbkV4aXQ/OiBFdmVudEhhbmRsZXI8QnV0dG9uRXZlbnQ+O1xuICAgICAgb25Gb2N1cz86IEV2ZW50SGFuZGxlcjxCdXR0b25FdmVudD47XG4gICAgICBvbkJsdXI/OiBFdmVudEhhbmRsZXI8QnV0dG9uRXZlbnQ+O1xuICAgIH0pO1xuXG4gICAgYWRkSGFuZGxlcihcbiAgICAgIGV2ZW50TmFtZTogQnV0dG9uRXZlbnROYW1lLFxuICAgICAgaGFuZGxlcjogRXZlbnRIYW5kbGVyPEJ1dHRvbkV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0XG4gICAgKTogdm9pZDtcbiAgICBhZGRPbmNlSGFuZGxlcihcbiAgICAgIGV2ZW50TmFtZTogQnV0dG9uRXZlbnROYW1lLFxuICAgICAgaGFuZGxlcjogRXZlbnRIYW5kbGVyPEJ1dHRvbkV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0LFxuICAgICAgdGltZXM/OiBudW1iZXJcbiAgICApOiB2b2lkO1xuICAgIGRpc2FibGUoKTogdm9pZDtcbiAgICBlbmFibGUoKTogdm9pZDtcbiAgICBnZXRIYW5kbGVyKGV2ZW50TmFtZTogQnV0dG9uRXZlbnROYW1lKTogKHNvdXJjZTogQnV0dG9uRXZlbnROYW1lLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcbiAgICByYWlzZUV2ZW50KGV2ZW50TmFtZTogQnV0dG9uRXZlbnROYW1lLCBldmVudEFyZ3M6IG9iamVjdCk6IHZvaWQ7XG4gICAgcmVtb3ZlQWxsSGFuZGxlcnMoZXZlbnROYW1lOiBCdXR0b25FdmVudE5hbWUpOiB2b2lkO1xuICAgIHJlbW92ZUhhbmRsZXIoZXZlbnROYW1lOiBCdXR0b25FdmVudE5hbWUsIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxCdXR0b25FdmVudD4pOiB2b2lkO1xuICB9XG5cbiAgY2xhc3MgQnV0dG9uR3JvdXAge1xuICAgIGJ1dHRvbnM6IEJ1dHRvbltdO1xuICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgdHJhY2tlcjogTW91c2VUcmFja2VyO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogeyBidXR0b25zOiBCdXR0b25bXTsgZWxlbWVudD86IEVsZW1lbnQgfSk7XG4gIH1cblxuICBpbnRlcmZhY2UgVENvbnRyb2xPcHRpb25zIHtcbiAgICBhbmNob3I/OiBDb250cm9sQW5jaG9yO1xuICAgIGF0dGFjaFRvVmlld2VyPzogYm9vbGVhbjtcbiAgICBhdXRvRmFkZT86IGJvb2xlYW47XG4gIH1cblxuICBjbGFzcyBDb250cm9sIHtcbiAgICBhbmNob3I6IENvbnRyb2xBbmNob3I7XG4gICAgYXV0b0ZhZGU6IGJvb2xlYW47XG4gICAgY29udGFpbmVyOiBFbGVtZW50O1xuICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgd3JhcHBlcjogRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnQsIG9wdGlvbnM6IFRDb250cm9sT3B0aW9ucywgY29udGFpbmVyOiBFbGVtZW50KTtcblxuICAgIGRlc3Ryb3koKTogdm9pZDtcbiAgICBpc1Zpc2libGUoKTogYm9vbGVhbjtcbiAgICBzZXRPcGFjaXR5KG9wYWNpdHk6IG51bWJlcik6IHZvaWQ7XG4gICAgc2V0VmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIENvbnRyb2xEb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBvYmplY3QpO1xuXG4gICAgYWRkQ29udHJvbChlbGVtZW50OiBDb250cm9sLCBjb250cm9sT3B0aW9uczogVENvbnRyb2xPcHRpb25zKTogdm9pZDtcbiAgICBhcmVDb250cm9sc0VuYWJsZWQoKTogYm9vbGVhbjtcbiAgICBjbGVhckNvbnRyb2xzKCk6IENvbnRyb2xEb2NrO1xuICAgIHJlbW92ZUNvbnRyb2woZWxlbWVudDogQ29udHJvbCk6IENvbnRyb2xEb2NrO1xuICAgIHNldENvbnRyb2xzRW5hYmxlZChlbmFibGVkOiBib29sZWFuKTogQ29udHJvbERvY2s7XG4gIH1cblxuICBjbGFzcyBEaXNwbGF5UmVjdCBleHRlbmRzIFJlY3Qge1xuICAgIG1heExldmVsOiBudW1iZXI7XG4gICAgbWluTGV2ZWw6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgeDogbnVtYmVyLFxuICAgICAgeTogbnVtYmVyLFxuICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgbWluTGV2ZWw6IG51bWJlcixcbiAgICAgIG1heExldmVsOiBudW1iZXJcbiAgICApO1xuICB9XG5cbiAgY2xhc3MgRHJhd2VyIHtcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgSFRNTEVsZW1lbnQ7XG4gICAgY29udGFpbmVyOiBFbGVtZW50O1xuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGw7XG4gICAgLy8gZWxlbWVudCA6IEVsZW1lbnQ7IC8vIERlcHJlY2F0ZWRcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtcbiAgICAgIHZpZXdlcjogVmlld2VyO1xuICAgICAgdmlld3BvcnQ6IFZpZXdwb3J0O1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIGRlYnVnR3JpZENvbG9yPzogc3RyaW5nO1xuICAgIH0pO1xuXG4gICAgYmxlbmRTa2V0Y2gob3B0aW9uczoge1xuICAgICAgb3BhY2l0eTogbnVtYmVyO1xuICAgICAgc2NhbGU/OiBudW1iZXI7XG4gICAgICB0cmFuc2xhdGU/OiBQb2ludDtcbiAgICAgIGNvbXBvc2l0ZU9wZXJhdGlvbj86IHN0cmluZztcbiAgICAgIGJvdW5kcz86IFJlY3Q7XG4gICAgfSk6IHZvaWQ7XG4gICAgY2FuUm90YXRlKCk6IGJvb2xlYW47XG4gICAgY2xlYXIoKTogdm9pZDtcbiAgICBkZXN0cm95KCk6IHZvaWQ7XG4gICAgZHJhd1RpbGUoXG4gICAgICB0aWxlOiBUaWxlLFxuICAgICAgZHJhd2luZ0hhbmRsZXI6IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IGFueSwgcmVuZGVyZWQ6IGFueSkgPT4gdm9pZCwgLy8gVE9ETzogZGV0ZXJtaW5lIGhhbmRsZXIgcGFyYW1ldGVyIHR5cGVzXG4gICAgICB1c2VTa2V0Y2g6IGJvb2xlYW4sXG4gICAgICBzY2FsZT86IG51bWJlcixcbiAgICAgIHRyYW5zbGF0ZT86IFBvaW50XG4gICAgKTogdm9pZDtcbiAgICBnZXRDYW52YXNTaXplKHNrZXRjaDogYm9vbGVhbik6IFBvaW50O1xuICAgIGdldE9wYWNpdHkoKTogbnVtYmVyO1xuICAgIHNldE9wYWNpdHkob3BhY2l0eTogbnVtYmVyKTogRHJhd2VyO1xuICAgIHZpZXdwb3J0VG9EcmF3ZXJSZWN0YW5nbGUocmVjdGFuZ2xlOiBSZWN0KTogUmVjdDtcbiAgICBzZXRJbWFnZVNtb290aGluZ0VuYWJsZWQoaW1hZ2VTbW9vdGhpbmdFbmFibGVkPzogYm9vbGVhbik6IHZvaWQ7XG4gICAgdmlld3BvcnRDb29yZFRvRHJhd2VyQ29vcmQocG9pbnQ6IFBvaW50KTogUG9pbnQ7XG4gICAgY2xpcFdpdGhQb2x5Z29ucyhwb2x5Z29uczogUG9pbnRbXVtdLCB1c2VTa2V0Y2g/OiBib29sZWFuKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIER6aVRpbGVTb3VyY2UgZXh0ZW5kcyBUaWxlU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICAgIHRpbGVTaXplOiBudW1iZXIsXG4gICAgICB0aWxlT3ZlcmxhcDogbnVtYmVyLFxuICAgICAgdGlsZXNVcmw6IG51bWJlcixcbiAgICAgIGZpbGVGb3JtYXQ6IG51bWJlcixcbiAgICAgIGRpc3BsYXlSZWN0czogbnVtYmVyLFxuICAgICAgbWluTGV2ZWw6IG51bWJlcixcbiAgICAgIG1heExldmVsOiBudW1iZXJcbiAgICApO1xuICB9XG5cbiAgY2xhc3MgSUlJRlRpbGVTb3VyY2UgZXh0ZW5kcyBUaWxlU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBUaWxlU291cmNlT3B0aW9ucyAmIHsgdGlsZUZvcm1hdD86IHN0cmluZyB9KTtcbiAgfVxuXG4gIGNsYXNzIEltYWdlTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiB7IGpvYkxpbWl0PzogbnVtYmVyOyB0aW1lb3V0PzogbnVtYmVyIH0pO1xuXG4gICAgYWRkSm9iKG9wdGlvbnM6IHtcbiAgICAgIHNyYz86IHN0cmluZztcbiAgICAgIGxvYWRXaXRoQWpheD86IHN0cmluZztcbiAgICAgIGFqYXhIZWFkZXJzPzogc3RyaW5nO1xuICAgICAgY3Jvc3NPcmlnaW5Qb2xpY3k/OiBzdHJpbmcgfCBib29sZWFuO1xuICAgICAgYWpheFdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgICBjYWxsYmFjaz86ICgpID0+IHZvaWQ7XG4gICAgICBhYm9ydD86ICgpID0+IHZvaWQ7XG4gICAgfSk6IHZvaWQ7XG4gICAgY2xlYXIoKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIEltYWdlVGlsZVNvdXJjZSBleHRlbmRzIFRpbGVTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtcbiAgICAgIHVybDogc3RyaW5nO1xuICAgICAgYnVpbGRQeXJhbWlkPzogYm9vbGVhbjtcbiAgICAgIGNyb3NzT3JpZ2luUG9saWN5Pzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgICAgIGFqYXhXaXRoQ3JlZGVudGlhbHM/OiBzdHJpbmcgfCBib29sZWFuO1xuICAgICAgdXNlQ2FudmFzPzogYm9vbGVhbjtcbiAgICB9KTtcbiAgfVxuXG4gIGNsYXNzIExlZ2FjeVRpbGVTb3VyY2UgZXh0ZW5kcyBUaWxlU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgIGxldmVscz86IEFycmF5PHtcbiAgICAgICAgdXJsOiBzdHJpbmc7XG4gICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgIGhlaWdodDogbnVtYmVyO1xuICAgICAgfT5cbiAgICApO1xuICB9XG5cbiAgaW50ZXJmYWNlIE1vdXNlVHJhY2tlck9wdGlvbnMge1xuICAgIGVsZW1lbnQ6IEVsZW1lbnQgfCBzdHJpbmc7XG4gICAgc3RhcnREaXNhYmxlZD86IGJvb2xlYW47XG4gICAgY2xpY2tUaW1lVGhyZXNob2xkPzogbnVtYmVyO1xuICAgIGNsaWNrRGlzdFRocmVzaG9sZD86IG51bWJlcjtcbiAgICBkYmxDbGlja1RpbWVUaHJlc2hvbGQ/OiBudW1iZXI7XG4gICAgZGJsQ2xpY2tEaXN0VGhyZXNob2xkPzogbnVtYmVyO1xuICAgIHN0b3BEZWxheT86IG51bWJlcjtcbiAgICBlbnRlckhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgZXhpdEhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgcHJlc3NIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIG5vblByaW1hcnlQcmVzc0hhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgcmVsZWFzZUhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgbm9uUHJpbWFyeVJlbGVhc2VIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIG1vdmVIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIHNjcm9sbEhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgY2xpY2tIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIGRibENsaWNrSGFuZGxlcj86IEV2ZW50SGFuZGxlcjxPU0RFdmVudDxhbnk+PjtcbiAgICBkcmFnSGFuZGxlcj86IEV2ZW50SGFuZGxlcjxPU0RFdmVudDxhbnk+PjtcbiAgICBkcmFnRW5kSGFuZGxlcj86IEV2ZW50SGFuZGxlcjxPU0RFdmVudDxhbnk+PjtcbiAgICBwaW5jaEhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAga2V5RG93bkhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAga2V5VXBIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIGtleUhhbmRsZXI/OiBFdmVudEhhbmRsZXI8T1NERXZlbnQ8YW55Pj47XG4gICAgZm9jdXNIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIGJsdXJIYW5kbGVyPzogRXZlbnRIYW5kbGVyPE9TREV2ZW50PGFueT4+O1xuICAgIHVzZXJEYXRhPzogb2JqZWN0O1xuICB9XG4gIGNsYXNzIE1vdXNlVHJhY2tlciB7XG4gICAgY2xpY2tUaW1lVGhyZXNob2xkOiBudW1iZXI7XG4gICAgY2xpY2tEaXN0VGhyZXNob2xkOiBudW1iZXI7XG4gICAgZGJsQ2xpY2tUaW1lVGhyZXNob2xkOiBudW1iZXI7XG4gICAgZGJsQ2xpY2tEaXN0VGhyZXNob2xkOiBudW1iZXI7XG4gICAgZWxlbWVudDogRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE1vdXNlVHJhY2tlck9wdGlvbnMpO1xuXG4gICAgYmx1ckhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBjbGlja0hhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBkYmxDbGlja0hhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBkZXN0cm95KCk6IHZvaWQ7XG4gICAgZHJhZ0VuZEhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBkcmFnSGFuZGxlcjogKGV2ZW50OiBPU0RFdmVudDxhbnk+KSA9PiB2b2lkO1xuICAgIGVudGVySGFuZGxlcjogKGV2ZW50OiBPU0RFdmVudDxhbnk+KSA9PiB2b2lkO1xuICAgIGV4aXRIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgZm9jdXNIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgZ2V0QWN0aXZlUG9pbnRlckNvdW50KCk6IG51bWJlcjtcbiAgICBnZXRBY3RpdmVQb2ludGVyc0xpc3RCeVR5cGUodHlwZTogc3RyaW5nKTogR2VzdHVyZVBvaW50TGlzdDtcbiAgICBnZXRBY3RpdmVQb2ludGVyc0xpc3RzRXhjZXB0VHlwZSh0eXBlOiBzdHJpbmcpOiBHZXN0dXJlUG9pbnRMaXN0W107XG4gICAga2V5RG93bkhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBrZXlIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAga2V5VXBIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgbW92ZUhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBub25QcmltYXJ5UHJlc3NIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgbm9uUHJpbWFyeVJlbGVhc2VIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgcGluY2hIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgcHJlc3NIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgcmVsZWFzZUhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgICBzY3JvbGxIYW5kbGVyOiAoZXZlbnQ6IE9TREV2ZW50PGFueT4pID0+IHZvaWQ7XG4gICAgc2V0VHJhY2tpbmcodHJhY2s6IGJvb2xlYW4pOiBhbnk7XG4gICAgc3RvcEhhbmRsZXI6IChldmVudDogT1NERXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgfVxuXG4gIGludGVyZmFjZSBHZXN0dXJlUG9pbnQge1xuICAgIGlkOiBudW1iZXI7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGNhcHR1cmVkOiBib29sZWFuO1xuICAgIGlzUHJpbWFyeTogYm9vbGVhbjtcbiAgICBpbnNpZGVFbGVtZW50UHJlc3NlZDogYm9vbGVhbjtcbiAgICBpbnNpZGVFbGVtZW50OiBib29sZWFuO1xuICAgIHNwZWVkOiBudW1iZXI7XG4gICAgZGlyZWN0aW9uOiBudW1iZXI7XG4gICAgY29udGFjdFBvczogUG9pbnQ7XG4gICAgY29udGFjdFRpbWU6IG51bWJlcjtcbiAgICBsYXN0UG9zOiBQb2ludDtcbiAgICBsYXN0VGltZTogbnVtYmVyO1xuICAgIGN1cnJlbnRQb3M6IFBvaW50O1xuICAgIGN1cnJlbnRUaW1lOiBudW1iZXI7XG4gIH1cblxuICBjbGFzcyBHZXN0dXJlUG9pbnRMaXN0IHtcbiAgICBidXR0b25zOiBCdXR0b25bXTtcbiAgICBjYXB0dXJlQ291bnQ6IG51bWJlcjtcbiAgICBjbGlja3M6IG51bWJlcjtcbiAgICBjb250YWN0czogbnVtYmVyO1xuICAgIHR5cGU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZyk7XG5cbiAgICBhZGQoZ2VzdHVyZVBvaW50OiBHZXN0dXJlUG9pbnQpOiBudW1iZXI7XG4gICAgYWRkQ29udGFjdCgpOiB2b2lkO1xuICAgIGFzQXJyYXkoKTogR2VzdHVyZVBvaW50W107XG4gICAgZ2V0QnlJZChpZDogbnVtYmVyKTogR2VzdHVyZVBvaW50IHwgbnVsbDtcbiAgICBnZXRCeUluZGV4KGluZGV4OiBudW1iZXIpOiBHZXN0dXJlUG9pbnQgfCBudWxsO1xuICAgIGdldExlbmd0aCgpOiBudW1iZXI7XG4gICAgZ2V0UHJpbWFyeSgpOiBHZXN0dXJlUG9pbnQgfCBudWxsO1xuICAgIHJlbW92ZUJ5SWQoaWQ6IG51bWJlcik6IG51bWJlcjtcbiAgICByZW1vdmVDb250YWN0KCk6IHZvaWQ7XG4gIH1cblxuICBjbGFzcyBOYXZpZ2F0b3IgZXh0ZW5kcyBWaWV3ZXIge1xuICAgIHNldEZsaXAoc3RhdGU6IGJvb2xlYW4pOiB2b2lkO1xuICAgIHVwZGF0ZSh2aWV3cG9ydDogVmlld3BvcnQpOiB2b2lkO1xuICAgIHVwZGF0ZVNpemUoKTogdm9pZDtcbiAgICBzZXRXaWR0aCh3aWR0aDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZDtcbiAgICBzZXRIZWlnaHQod2lkdGg6IG51bWJlciB8IHN0cmluZyk6IHZvaWQ7XG4gIH1cblxuICBjbGFzcyBPc21UaWxlU291cmNlIGV4dGVuZHMgVGlsZVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICB0aWxlU2l6ZTogbnVtYmVyLFxuICAgICAgdGlsZU92ZXJsYXA6IG51bWJlcixcbiAgICAgIHRpbGVzVXJsOiBzdHJpbmdcbiAgICApO1xuICB9XG5cbiAgdHlwZSBPbkRyYXdDYWxsYmFjayA9IChwb3NpdGlvbjogUG9pbnQsIHNpemU6IFBvaW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4gdm9pZDtcblxuICBpbnRlcmZhY2UgT3ZlcmxheU9wdGlvbnMge1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGxvY2F0aW9uOiBQb2ludCB8IFJlY3Q7XG4gICAgcGxhY2VtZW50PzogUGxhY2VtZW50O1xuICAgIG9uRHJhdz86IE9uRHJhd0NhbGxiYWNrO1xuICAgIGNoZWNrUmVzaXplPzogYm9vbGVhbjtcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgcm90YXRpb25Nb2RlPzogYm9vbGVhbjtcbiAgfVxuXG4gIGNsYXNzIE92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE92ZXJsYXlPcHRpb25zKTtcbiAgICBhZGp1c3QocG9zaXRpb246IFBvaW50LCBzaXplOiBQb2ludCk6IHZvaWQ7XG4gICAgZGVzdHJveSgpOiB2b2lkO1xuICAgIGRyYXdIVE1MKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkO1xuICAgIGdldEJvdW5kcyh2aWV3cG9ydDogVmlld3BvcnQpOiBSZWN0O1xuICAgIHVwZGF0ZShsb2NhdGlvbjogUG9pbnQgfCBSZWN0LCBwbGFjZW1lbnQ6IFBsYWNlbWVudCk6IHZvaWQ7XG4gIH1cblxuICBjbGFzcyBQb2ludCB7XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcbiAgICBjb25zdHJ1Y3Rvcih4PzogbnVtYmVyLCB5PzogbnVtYmVyKTtcbiAgICBhcHBseShmdW5jOiAodjogbnVtYmVyKSA9PiBudW1iZXIpOiBQb2ludDtcbiAgICBjbG9uZSgpOiBQb2ludDtcbiAgICBkaXN0YW5jZVRvKHBvaW50OiBQb2ludCk6IG51bWJlcjtcbiAgICBkaXZpZGUoZmFjdG9yOiBudW1iZXIpOiBQb2ludDtcbiAgICBlcXVhbHMocG9pbnQ6IFBvaW50KTogYm9vbGVhbjtcbiAgICBtaW51cyhwb2ludDogUG9pbnQpOiBQb2ludDtcbiAgICBuZWdhdGUoKTogUG9pbnQ7XG4gICAgcGx1cyhwb2ludDogUG9pbnQpOiBQb2ludDtcbiAgICByb3RhdGUoZGVncmVlczogbnVtYmVyLCBwaXZvdD86IFBvaW50KTogUG9pbnQ7XG4gICAgc3F1YXJlZERpc3RhbmNlVG8ocG9pbnQ6IFBvaW50KTogbnVtYmVyO1xuICAgIHRpbWVzKGZhY3RvcjogbnVtYmVyKTogUmVjdDtcbiAgICB0b1N0cmluZygpOiBzdHJpbmc7XG4gIH1cblxuICBjbGFzcyBSZWN0IHtcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgZGVncmVlczogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKHg/OiBudW1iZXIsIHk/OiBudW1iZXIsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIsIGRlZ3JlZXM/OiBudW1iZXIpO1xuICAgIGNsb25lKCk6IFJlY3Q7XG4gICAgY29udGFpbnNQb2ludChwb2ludDogUG9pbnQsIGVwc2lsb24/OiBudW1iZXIpOiBib29sZWFuO1xuICAgIGVxdWFscyhyZWN0YW5nbGU6IFJlY3QpOiBib29sZWFuO1xuICAgIGdldEFzcGVjdFJhdGlvKCk6IG51bWJlcjtcbiAgICBnZXRCb3R0b21MZWZ0KCk6IFBvaW50O1xuICAgIGdldEJvdHRvbVJpZ2h0KCk6IFBvaW50O1xuICAgIGdldEJvdW5kaW5nQm94KCk6IFJlY3Q7XG4gICAgZ2V0Q2VudGVyKCk6IFBvaW50O1xuICAgIGdldEludGVnZXJCb3VuZGluZ0JveCgpOiBSZWN0O1xuICAgIGdldFNpemUoKTogUG9pbnQ7XG4gICAgZ2V0VG9wTGVmdCgpOiBQb2ludDtcbiAgICBnZXRUb3BSaWdodCgpOiBQb2ludDtcbiAgICBpbnRlcnNlY3Rpb24ocmVjdDogUmVjdCk6IFJlY3Q7XG4gICAgcm90YXRlKGRlZ3JlZXM6IG51bWJlciwgcGl2b3Q/OiBSZWN0KTogUmVjdDtcbiAgICB0aW1lcyhmYWN0b3I6IG51bWJlcik6IFJlY3Q7XG4gICAgdG9TdHJpbmcoKTogc3RyaW5nO1xuICAgIHRyYW5zbGF0ZShkZWx0YTogUG9pbnQpOiBSZWN0O1xuICAgIHVuaW9uKHJlY3Q6IFJlY3QpOiBSZWN0O1xuICB9XG5cbiAgY2xhc3MgUmVmZXJlbmNlU3RyaXAge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IG9iamVjdCk7XG4gICAgc2V0Rm9jdXMoKTogdm9pZDtcbiAgICB1cGRhdGUoKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIFNwcmluZyB7XG4gICAgYW5pbWF0aW9uVGltZTogbnVtYmVyO1xuICAgIGN1cnJlbnQ6IHtcbiAgICAgIHZhbHVlOiBudW1iZXI7XG4gICAgICB0aW1lOiBudW1iZXI7XG4gICAgfTtcbiAgICBzcHJpbmdTdGlmZm5lc3M6IG51bWJlcjtcbiAgICBzdGFydDoge1xuICAgICAgdmFsdWU6IG51bWJlcjtcbiAgICAgIHRpbWU6IG51bWJlcjtcbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtcbiAgICAgIHNwcmluZ1N0aWZmbmVzczogbnVtYmVyO1xuICAgICAgYW5pbWF0aW9uVGltZTogbnVtYmVyO1xuICAgICAgaW5pdGlhbD86IG51bWJlcjtcbiAgICAgIGV4cG9uZW50aWFsPzogYm9vbGVhbjtcbiAgICB9KTtcbiAgICBpc0F0VGFyZ2V0VmFsdWUoKTogYm9vbGVhbjtcbiAgICByZXNldFRvKHRhcmdldDogbnVtYmVyKTogdm9pZDtcbiAgICBzaGlmdEJ5KGRlbHRhOiBudW1iZXIpOiB2b2lkO1xuICAgIHNwcmluZ1RvKHRhcmdldDogbnVtYmVyKTogdm9pZDtcbiAgICB1cGRhdGUoKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIFRpbGUge1xuICAgIGFqYXhIZWFkZXJzOiBvYmplY3Q7XG4gICAgYmVpbmdEcmF3bjogYm9vbGVhbjtcbiAgICBibGVuZFN0YXJ0OiBudW1iZXI7XG4gICAgYm91bmRzOiBSZWN0O1xuICAgIGNhY2hlS2V5OiBzdHJpbmc7XG4gICAgY29udGV4dDJEOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgZWxlbWVudDogRWxlbWVudDtcbiAgICBleGlzdHM6IGJvb2xlYW47XG4gICAgaW1hZ2U6IG9iamVjdDtcbiAgICBpbWdFbGVtZW50OiBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGlzQm90dG9tTW9zdDogYm9vbGVhbjtcbiAgICBpc1JpZ2h0TW9zdDogYm9vbGVhbjtcbiAgICBsYXN0VG91Y2hUaW1lOiBudW1iZXI7XG4gICAgbGV2ZWw6IG51bWJlcjtcbiAgICBsb2FkZWQ6IGJvb2xlYW47XG4gICAgbG9hZGluZzogYm9vbGVhbjtcbiAgICBsb2FkV2l0aEFqYXg6IGJvb2xlYW47XG4gICAgb3BhY2l0eTogbnVtYmVyO1xuICAgIHBvc2l0aW9uOiBQb2ludDtcbiAgICBzaXplOiBQb2ludDtcbiAgICBzb3VyY2VCb3VuZHM6IFJlY3Q7XG4gICAgc3R5bGU6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICB2aXNpYmlsaXR5OiBudW1iZXI7XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgbGV2ZWw6IG51bWJlcixcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlcixcbiAgICAgIGJvdW5kczogUmVjdCxcbiAgICAgIGV4aXN0czogYm9vbGVhbixcbiAgICAgIHVybDogc3RyaW5nLFxuICAgICAgY29udGV4dDJEOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICBsb2FkV2l0aEFqYXg6IGJvb2xlYW4sXG4gICAgICBhamF4SGVhZGVyczogb2JqZWN0LFxuICAgICAgc291cmNlQm91bmRzOiBSZWN0XG4gICAgKTtcbiAgICBkcmF3Q2FudmFzKFxuICAgICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgZHJhd2luZ0hhbmRsZXI6IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IGFueSwgcmVuZGVyZWQ6IGFueSkgPT4gdm9pZCxcbiAgICAgIHNjYWxlPzogbnVtYmVyLFxuICAgICAgdHJhbnNsYXRlPzogUG9pbnRcbiAgICApOiB2b2lkO1xuICAgIGRyYXdIVE1MKGNvbnRhaW5lcjogRWxlbWVudCk6IHZvaWQ7XG4gICAgZ2V0U2NhbGVGb3JFZGdlU21vb3RoaW5nKCk6IG51bWJlcjtcbiAgICBnZXRUcmFuc2xhdGlvbkZvckVkZ2VTbW9vdGhpbmcoc2NhbGU/OiBudW1iZXIpOiBQb2ludDtcbiAgICB0b1N0cmluZygpOiBzdHJpbmc7XG4gICAgdW5sb2FkKCk6IHZvaWQ7XG4gIH1cblxuICBjbGFzcyBUaWxlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHsgbWF4SW1hZ2VDYWNoZUNvdW50PzogbnVtYmVyIH0pO1xuICAgIGNhY2hlVGlsZShvcHRpb25zOiB7XG4gICAgICB0aWxlOiBUaWxlO1xuICAgICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7IC8vIFRPRE86IGNoZWNrIHR5cGVcbiAgICAgIHRpbGVkSW1hZ2U6IFRpbGVkSW1hZ2U7XG4gICAgICBjdXRvZmY/OiBudW1iZXI7XG4gICAgfSk6IHZvaWQ7XG4gICAgY2xlYXJUaWxlc0Zvcih0aWxlZEltYWdlOiBUaWxlZEltYWdlKTogdm9pZDtcbiAgICBudW1UaWxlc0xvYWRlZCgpOiBudW1iZXI7XG4gIH1cblxuICBjbGFzcyBUaWxlZEltYWdlIHtcbiAgICBzb3VyY2U6IFRpbGVTb3VyY2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1xuICAgICAgc291cmNlOiBUaWxlU291cmNlO1xuICAgICAgdmlld2VyOiBWaWV3ZXI7XG4gICAgICB0aWxlQ2FjaGU6IFRpbGVDYWNoZTtcbiAgICAgIGRyYXdlcjogRHJhd2VyO1xuICAgICAgaW1hZ2VMb2FkZXI6IEltYWdlTG9hZGVyO1xuICAgICAgeD86IG51bWJlcjtcbiAgICAgIHk/OiBudW1iZXI7XG4gICAgICB3aWR0aD86IG51bWJlcjtcbiAgICAgIGhlaWdodD86IG51bWJlcjtcbiAgICAgIGZpdEJvdW5kcz86IFJlY3Q7XG4gICAgICBmaXRCb3VuZHNQbGFjZW1lbnQ/OiBQbGFjZW1lbnQ7XG4gICAgICBjbGlwPzogUmVjdDtcbiAgICAgIHNwcmluZ1N0aWZmbmVzcz86IG51bWJlcjtcbiAgICAgIGFuaW1hdGlvblRpbWU/OiBib29sZWFuO1xuICAgICAgbWluWm9vbUltYWdlUmF0aW8/OiBudW1iZXI7XG4gICAgICB3cmFwSG9yaXpvbnRhbD86IGJvb2xlYW47XG4gICAgICB3cmFwVmVydGljYWw/OiBib29sZWFuO1xuICAgICAgaW1tZWRpYXRlUmVuZGVyPzogYm9vbGVhbjtcbiAgICAgIGJsZW5kVGltZT86IG51bWJlcjtcbiAgICAgIGFsd2F5c0JsZW5kPzogYm9vbGVhbjtcbiAgICAgIG1pblBpeGVsUmF0aW8/OiBudW1iZXI7XG4gICAgICBzbW9vdGhUaWxlRWRnZXNNaW5ab29tPzogbnVtYmVyO1xuICAgICAgaU9TRGV2aWNlPzogYm9vbGVhbjtcbiAgICAgIG9wYWNpdHk/OiBudW1iZXI7XG4gICAgICBwcmVsb2FkPzogYm9vbGVhbjtcbiAgICAgIGNvbXBvc2l0ZU9wZXJhdGlvbj86IHN0cmluZztcbiAgICAgIGRlYnVnTW9kZT86IGJvb2xlYW47XG4gICAgICBwbGFjZWhvbGRlckZpbGxTdHlsZT86IHN0cmluZyB8IENhbnZhc0dyYWRpZW50IHwgQ2FudmFzUGF0dGVybjtcbiAgICAgIGNyb3NzT3JpZ2luUG9saWN5Pzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgICAgIGFqYXhXaXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgICAgbG9hZFRpbGVzV2l0aEFqYXg/OiBib29sZWFuO1xuICAgICAgYWpheEhlYWRlcnM/OiBvYmplY3Q7XG4gICAgfSk7XG5cbiAgICBhZGRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8VGlsZWRJbWFnZUV2ZW50PiwgdXNlckRhdGE/OiBvYmplY3QpOiB2b2lkO1xuICAgIGFkZE9uY2VIYW5kbGVyKFxuICAgICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXI8VGlsZWRJbWFnZUV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0XG4gICAgKTogdm9pZDtcbiAgICBkZXN0cm95KCk6IHZvaWQ7XG4gICAgZHJhdygpOiB2b2lkO1xuICAgIGZpdEJvdW5kcyhib3VuZHM6IFJlY3QsIGFuY2hvcj86IFBsYWNlbWVudCwgaW1tZWRpYXRlbHk/OiBib29sZWFuKTogdm9pZDtcbiAgICBnZXRCb3VuZHMoY3VycmVudD86IGJvb2xlYW4pOiBSZWN0O1xuICAgIGdldEJvdW5kc05vUm90YXRlKGN1cnJlbnQ/OiBib29sZWFuKTogUmVjdDtcbiAgICBnZXRDbGlwKCk6IFJlY3QgfCBudWxsO1xuICAgIGdldENsaXBwZWRCb3VuZHMoY3VycmVudD86IGJvb2xlYW4pOiBSZWN0O1xuICAgIGdldENvbXBvc2l0ZU9wZXJhdGlvbigpOiBzdHJpbmc7XG4gICAgZ2V0Q29udGVudFNpemUoKTogUG9pbnQ7XG4gICAgZ2V0RnVsbHlMb2FkZWQoKTogYm9vbGVhbjtcbiAgICBnZXRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nKTogKHNvdXJjZTogRXZlbnQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuICAgIGdldE9wYWNpdHkoKTogbnVtYmVyO1xuICAgIGdldFByZWxvYWQoKTogYm9vbGVhbjtcbiAgICBnZXRSb3RhdGlvbihjdXJyZW50PzogYm9vbGVhbik6IG51bWJlcjtcbiAgICBpbWFnZVRvVmlld2VyRWxlbWVudENvb3JkaW5hdHMocGl4ZWw6IFBvaW50KTogUG9pbnQ7XG4gICAgaW1hZ2VUb1ZpZXdwb3J0Q29vcmRpbmF0ZXMocG9zaXRpb246IFBvaW50LCBjdXJyZW50PzogYm9vbGVhbik6IFBvaW50O1xuICAgIGltYWdlVG9WaWV3cG9ydENvb3JkaW5hdGVzKGltYWdlWDogbnVtYmVyLCBpbWFnZVk6IG51bWJlciwgY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBpbWFnZVRvVmlld3BvcnRSZWN0YW5nbGUoXG4gICAgICBpbWFnZVg6IG51bWJlcixcbiAgICAgIGltYWdlWT86IG51bWJlcixcbiAgICAgIHBpeGVsV2lkdGg/OiBudW1iZXIsXG4gICAgICBwaXhlbEhlaWdodD86IG51bWJlcixcbiAgICAgIGN1cnJlbnQ/OiBib29sZWFuXG4gICAgKTogUmVjdDtcbiAgICBpbWFnZVRvVmlld3BvcnRSZWN0YW5nbGUoXG4gICAgICBwb3NpdGlvbjogUmVjdCxcbiAgICAgIHBpeGVsV2lkdGg/OiBudW1iZXIsXG4gICAgICBwaXhlbEhlaWdodD86IG51bWJlcixcbiAgICAgIGN1cnJlbnQ/OiBib29sZWFuXG4gICAgKTogUmVjdDtcblxuICAgIGltYWdlVG9WaWV3cG9ydFpvb20oaW1hZ2Vab29tOiBudW1iZXIpOiBudW1iZXI7XG4gICAgaW1hZ2VUb1dpbmRvd0Nvb3JkaW5hdGVzKHBpeGVsOiBQb2ludCk6IFBvaW50O1xuICAgIG5lZWRzRHJhdygpOiBib29sZWFuO1xuICAgIHJhaXNlRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50QXJnczogb2JqZWN0KTogdm9pZDtcbiAgICByZW1vdmVBbGxIYW5kbGVycyhldmVudE5hbWU6IHN0cmluZyk6IHZvaWQ7XG4gICAgcmVtb3ZlSGFuZGxlcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRXZlbnRIYW5kbGVyPFRpbGVkSW1hZ2VFdmVudD4pOiB2b2lkO1xuICAgIHJlc2V0KCk6IHZvaWQ7XG4gICAgcmVzZXRDcm9wcGluZ1BvbHlnb25zKCk6IHZvaWQ7XG4gICAgc2V0Q2xpcChuZXdDbGlwOiBSZWN0IHwgbnVsbCk6IHZvaWQ7XG4gICAgc2V0Q29tcG9zaXRlT3BlcmF0aW9uKGNvbXBvc2l0ZU9wZXJhdGlvbjogc3RyaW5nKTogdm9pZDtcbiAgICBzZXRDcm9wcGluZ1BvbHlnb25zKHBvbHlnb25zOiBQb2ludFtdW10pOiB2b2lkO1xuICAgIHNldEhlaWdodChoZWlnaHQ6IG51bWJlciwgaW1tZWRpYXRlbHk/OiBib29sZWFuKTogdm9pZDtcbiAgICBzZXRPcGFjaXR5KG9wYWNpdHk6IG51bWJlcik6IHZvaWQ7XG4gICAgc2V0UG9zaXRpb24ocG9zaXRpb246IFBvaW50LCBpbW1lZGlhdGVseT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIHNldFByZWxvYWQocHJlbG9hZDogYm9vbGVhbik6IHZvaWQ7XG4gICAgc2V0Um90YXRpb24oZGVncmVlczogbnVtYmVyLCBpbW1lZGlhdGVseT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIHNldFdpZHRoKHdpZHRoOiBudW1iZXIsIGltbWVkaWF0ZWx5PzogYm9vbGVhbik6IHZvaWQ7XG4gICAgdXBkYXRlKCk6IGJvb2xlYW47XG4gICAgdmlld2VyRWxlbWVudFRvSW1hZ2VDb29yZGluYXRlcyhwaXhlbDogUG9pbnQpOiBQb2ludDtcbiAgICB2aWV3cG9ydFRvSW1hZ2VDb29yZGluYXRlcyhwb3NpdGlvbjogUG9pbnQsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgdmlld3BvcnRUb0ltYWdlQ29vcmRpbmF0ZXModmlld2VyWDogbnVtYmVyLCB2aWV3ZXJZOiBudW1iZXIsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgdmlld3BvcnRUb0ltYWdlUmVjdGFuZ2xlKHBvc2l0aW9uOiBSZWN0KTogUmVjdDtcbiAgICB2aWV3cG9ydFRvSW1hZ2VSZWN0YW5nbGUoXG4gICAgICB2aWV3cG9ydFg6IG51bWJlcixcbiAgICAgIHZpZXdwb3J0WTogbnVtYmVyLFxuICAgICAgcGl4ZWxXaWR0aD86IG51bWJlcixcbiAgICAgIHBpeGVsSGVpZ2h0PzogbnVtYmVyLFxuICAgICAgY3VycmVudD86IGJvb2xlYW5cbiAgICApOiBSZWN0O1xuICAgIHZpZXdwb3J0VG9JbWFnZVpvb20odmlld3BvcnRab29tOiBudW1iZXIpOiBudW1iZXI7XG4gICAgd2luZG93VG9JbWFnZUNvb3JkaW5hdGVzKHBpeGVsOiBQb2ludCk6IFBvaW50O1xuICB9XG5cbiAgY2xhc3MgVGlsZVNvdXJjZSBleHRlbmRzIEV2ZW50U291cmNlIHtcbiAgICBhc3BlY3RSYXRpbzogbnVtYmVyO1xuICAgIGRpbWVuc2lvbnM6IFBvaW50O1xuICAgIG1heExldmVsOiBudW1iZXI7XG4gICAgbWlubGV2ZWw6IG51bWJlcjtcbiAgICByZWFkeTogYm9vbGVhbjtcbiAgICB0aWxlT3ZlcmxhcDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFRpbGVTb3VyY2VPcHRpb25zKTtcbiAgICBhZGRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8VGlsZVNvdXJjZUV2ZW50PiwgdXNlckRhdGE/OiBvYmplY3QpOiB2b2lkO1xuICAgIGFkZE9uY2VIYW5kbGVyKFxuICAgICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXI8VGlsZVNvdXJjZUV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0LFxuICAgICAgdGltZXM/OiBudW1iZXJcbiAgICApOiB2b2lkO1xuICAgIGNvbmZpZ3VyZShkYXRhOiBzdHJpbmcgfCBvYmplY3QgfCBhbnlbXSB8IERvY3VtZW50KTogb2JqZWN0O1xuICAgIGdldENsb3Nlc3RMZXZlbCgpOiBudW1iZXI7XG4gICAgZ2V0SGFuZGxlcihldmVudE5hbWU6IHN0cmluZyk6IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG4gICAgZ2V0SW1hZ2VJbmZvKHVybDogc3RyaW5nKTogdm9pZDtcbiAgICBnZXRMZXZlbFNjYWxlKGxldmVsOiBudW1iZXIpOiBudW1iZXI7XG4gICAgZ2V0TnVtVGlsZXMobGV2ZWw6IG51bWJlcik6IG51bWJlcjtcbiAgICBnZXRQaXhlbFJhdGlvKGxldmVsOiBudW1iZXIpOiBudW1iZXI7XG4gICAgZ2V0VGlsZUFqYXhIZWFkZXJzKGxldmVsOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogb2JqZWN0O1xuICAgIGdldFRpbGVBdFBvaW50KGxldmVsOiBudW1iZXIsIHBvaW50OiBQb2ludCk6IFRpbGU7XG4gICAgZ2V0VGlsZUJvdW5kcyhsZXZlbDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgaXNTb3VyY2U/OiBib29sZWFuKTogUmVjdDtcbiAgICBnZXRUaWxlSGVpZ2h0KGxldmVsOiBudW1iZXIpOiBudW1iZXI7XG4gICAgZ2V0VGlsZVVybChsZXZlbDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHN0cmluZztcbiAgICBnZXRUaWxlV2lkdGgobGV2ZWw6IG51bWJlcik6IG51bWJlcjtcbiAgICByYWlzZUV2ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEFyZ3M6IG9iamVjdCk6IHZvaWQ7XG4gICAgcmVtb3ZlQWxsSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpOiB2b2lkO1xuICAgIHJlbW92ZUhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxUaWxlU291cmNlRXZlbnQ+KTogdm9pZDtcbiAgICBzdXBwb3J0cyhkYXRhOiBzdHJpbmcgfCBvYmplY3QgfCBhbnlbXSB8IERvY3VtZW50LCB1cmw6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgdGlsZUV4aXN0cyhsZXZlbDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW47XG4gIH1cblxuICBjbGFzcyBUbXNUaWxlU291cmNlIGV4dGVuZHMgVGlsZVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICB0aWxlU2l6ZTogbnVtYmVyLFxuICAgICAgdGlsZU92ZXJsYXA6IG51bWJlcixcbiAgICAgIHRpbGVzVXJsOiBzdHJpbmdcbiAgICApO1xuICB9XG5cbiAgaW50ZXJmYWNlIEltYWdlT3B0aW9ucyB7XG4gICAgaW5kZXg/OiBudW1iZXI7XG4gICAgcmVwbGFjZT86IGJvb2xlYW47XG4gICAgeD86IG51bWJlcjtcbiAgICB5PzogbnVtYmVyO1xuICAgIHdpZHRoPzogbnVtYmVyO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBmaXRCb3VuZHM/OiBSZWN0O1xuICAgIGZpdEJvdW5kc1BsYWNlbWVudD86IFBsYWNlbWVudDtcbiAgICBjbGlwPzogUmVjdDtcbiAgICBvcGFjaXR5PzogbnVtYmVyO1xuICAgIHByZWxvYWQ/OiBib29sZWFuO1xuICAgIGRlZ3JlZXM/OiBudW1iZXI7XG4gICAgY29tcG9zaXRlT3BlcmF0aW9uPzogc3RyaW5nO1xuICAgIGNyb3NzT3JpZ2luUG9saWN5Pzogc3RyaW5nO1xuICAgIGFqYXhXaXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIGxvYWRUaWxlc1dpdGhBamF4PzogYm9vbGVhbjtcbiAgICBhamF4SGVhZGVycz86IG9iamVjdDtcbiAgICBzdWNjZXNzPzogKGV2ZW50OiBFdmVudCkgPT4gdm9pZDtcbiAgICBlcnJvcj86IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gICAgY29sbGVjdGlvbkltbWVkaWF0ZWx5PzogYm9vbGVhbjtcbiAgICBwbGFjZWhvbGRlckZpbGxTdHlsZT86IHN0cmluZyB8IENhbnZhc0dyYWRpZW50IHwgQ2FudmFzUGF0dGVybjtcbiAgfVxuXG4gIGludGVyZmFjZSBUaWxlZEltYWdlT3B0aW9ucyBleHRlbmRzIEltYWdlT3B0aW9ucyB7XG4gICAgdGlsZVNvdXJjZTogc3RyaW5nIHwgb2JqZWN0O1xuICB9XG5cbiAgaW50ZXJmYWNlIFNpbXBsZUltYWdlT3B0aW9ucyBleHRlbmRzIEltYWdlT3B0aW9ucyB7XG4gICAgdXJsOiBzdHJpbmc7XG4gIH1cblxuICBjbGFzcyBWaWV3ZXIgZXh0ZW5kcyBDb250cm9sRG9jayB7XG4gICAgY2FudmFzOiBIVE1MRWxlbWVudDtcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGRyYXdlcjogRHJhd2VyO1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGluaXRpYWxQYWdlOiBudW1iZXI7XG4gICAgbmF2aWdhdG9yOiBOYXZpZ2F0b3I7XG4gICAgdmlld3BvcnQ6IFZpZXdwb3J0O1xuICAgIHdvcmxkOiBXb3JsZDtcbiAgICByZWZlcmVuY2VTdHJpcDogUmVmZXJlbmNlU3RyaXA7XG4gICAgaW5uZXJUcmFja2VyOiB7XG4gICAgICBzY3JvbGxIYW5kbGVyOiAoZXZlbnQ6IHsgb3JpZ2luYWxFdmVudDogTW91c2VFdmVudDsgc2Nyb2xsOiBudW1iZXIgfSkgPT4gdm9pZDtcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogT3B0aW9ucyk7XG4gICAgX2NhbmNlbFBlbmRpbmdJbWFnZXMoKTogdm9pZDtcbiAgICBhZGRIYW5kbGVyKFxuICAgICAgZXZlbnROYW1lOiBWaWV3ZXJFdmVudE5hbWUsXG4gICAgICBjYWxsYmFjazogRXZlbnRIYW5kbGVyPFZpZXdlckV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0XG4gICAgKTogdm9pZDtcbiAgICBhZGRPbmNlSGFuZGxlcihcbiAgICAgIGV2ZW50TmFtZTogVmlld2VyRXZlbnROYW1lLFxuICAgICAgY2FsbGJhY2s6IEV2ZW50SGFuZGxlcjxWaWV3ZXJFdmVudD4sXG4gICAgICB1c2VyRGF0YT86IG9iamVjdCxcbiAgICAgIHRpbWVzPzogbnVtYmVyXG4gICAgKTogdm9pZDtcbiAgICBhZGRPdmVybGF5KFxuICAgICAgZWxlbWVudDogSFRNTEVsZW1lbnQgfCBzdHJpbmcgfCBvYmplY3QsXG4gICAgICBsb2NhdGlvbj86IFBvaW50IHwgUmVjdCxcbiAgICAgIHBsYWNlbWVudD86IFBsYWNlbWVudCxcbiAgICAgIG9uRHJhdz86IChlbGVtZW50OiBIVE1MRWxlbWVudCwgbG9jYXRpb246IExvY2F0aW9uLCBwbGFjZW1lbnQ6IFBsYWNlbWVudCkgPT4gdm9pZFxuICAgICk6IFZpZXdlcjtcbiAgICBhZGRSZWZlcmVuY2VTdHJpcCgpOiB2b2lkO1xuICAgIGFkZFNpbXBsZUltYWdlKG9wdGlvbnM6IFNpbXBsZUltYWdlT3B0aW9ucyk6IHZvaWQ7XG4gICAgYWRkVGlsZWRJbWFnZShvcHRpb25zOiBUaWxlZEltYWdlT3B0aW9ucyk6IHZvaWQ7XG4gICAgYmluZFNlcXVlbmNlQ29udHJvbHMoKTogVmlld2VyO1xuICAgIGJpbmRTdGFuZGFyZENvbnRyb2xzKCk6IFZpZXdlcjtcbiAgICBjbGVhck92ZXJsYXlzKCk6IFZpZXdlcjtcbiAgICBjbG9zZSgpOiBWaWV3ZXI7XG4gICAgY3VycmVudFBhZ2UoKTogbnVtYmVyO1xuICAgIGRlc3Ryb3koKTogdm9pZDtcbiAgICBmb3JjZVJlZHJhdygpOiBWaWV3ZXI7XG4gICAgZ2VzdHVyZVNldHRpbmdzQnlEZXZpY2VUeXBlKHR5cGU6IHN0cmluZyk6IEdlc3R1cmVTZXR0aW5ncztcbiAgICBnZXRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nKTogKGV2ZW50OiBFdmVudCkgPT4gdm9pZDtcbiAgICBnZXRPdmVybGF5QnlJZChlbGVtZW50OiBFbGVtZW50IHwgc3RyaW5nKTogT3ZlcmxheTtcbiAgICBnb1RvUGFnZShwYWdlOiBudW1iZXIpOiBWaWV3ZXI7XG4gICAgaXNGdWxsUGFnZSgpOiBib29sZWFuO1xuICAgIGlzTW91c2VOYXZFbmFibGVkKCk6IGJvb2xlYW47XG4gICAgaXNPcGVuKCk6IGJvb2xlYW47XG4gICAgaXNWaXNpYmxlKCk6IGJvb2xlYW47XG4gICAgb3Blbih0aWxlU291cmNlczogc3RyaW5nIHwgb2JqZWN0IHwgVGlsZVNvdXJjZVtdLCBpbml0aWFsUGFnZT86IG51bWJlcik6IFZpZXdlcjtcbiAgICByYWlzZUV2ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEFyZ3M/OiBvYmplY3QpOiB2b2lkO1xuICAgIHJlbW92ZUFsbEhhbmRsZXJzKGV2ZW50TmFtZTogc3RyaW5nKTogdm9pZDtcbiAgICByZW1vdmVIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8Vmlld2VyRXZlbnQ+KTogdm9pZDtcbiAgICByZW1vdmVPdmVybGF5KG92ZXJsYXk6IEVsZW1lbnQgfCBzdHJpbmcpOiBWaWV3ZXI7XG4gICAgcmVtb3ZlUmVmZXJlbmNlU3RyaXAoKTogdm9pZDtcbiAgICBzZXRDb250cm9sc0VuYWJsZWQoZW5hYmxlZDogYm9vbGVhbik6IFZpZXdlcjtcbiAgICBzZXREZWJ1Z01vZGUoZGVidWc6IGJvb2xlYW4pOiBWaWV3ZXI7XG4gICAgc2V0RnVsbFBhZ2UoZnVsbFNjcmVlbjogYm9vbGVhbik6IFZpZXdlcjtcbiAgICBzZXRGdWxsU2NyZWVuKGZ1bGxTY3JlZW46IGJvb2xlYW4pOiBWaWV3ZXI7XG4gICAgc2V0TW91c2VOYXZFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pOiBWaWV3ZXI7XG4gICAgc2V0VmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKTogVmlld2VyO1xuICAgIHVwZGF0ZU92ZXJsYXkoZWxlbWVudDogRWxlbWVudCB8IHN0cmluZywgbG9jYXRpb246IFBvaW50IHwgUmVjdCwgcGxhY2VtZW50PzogUGxhY2VtZW50KTogVmlld2VyO1xuICB9XG5cbiAgY2xhc3MgVmlld3BvcnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtcbiAgICAgIG1hcmdpbnM6IG9iamVjdDtcbiAgICAgIHNwcmluZ1N0aWZmbmVzcz86IG51bWJlcjtcbiAgICAgIGFuaW1hdGlvblRpbWU/OiBudW1iZXI7XG4gICAgICBtaW5ab29tSW1hZ2VSYXRpbz86IG51bWJlcjtcbiAgICAgIG1heFpvb21QaXhlbFJhdGlvPzogbnVtYmVyO1xuICAgICAgdmlzaWJpbGl0eVJhdGlvPzogbnVtYmVyO1xuICAgICAgd3JhcEhvcml6b250YWw/OiBib29sZWFuO1xuICAgICAgd3JhcFZlcnRpY2FsPzogYm9vbGVhbjtcbiAgICAgIGRlZmF1bHRab29tTGV2ZWw/OiBudW1iZXI7XG4gICAgICBtaW5ab29tTGV2ZWw/OiBudW1iZXI7XG4gICAgICBtYXhab29tTGV2ZWw/OiBudW1iZXI7XG4gICAgICBkZWdyZWVzPzogbnVtYmVyO1xuICAgICAgaG9tZUZpbGxzVmlld2VyPzogYm9vbGVhbjtcbiAgICB9KTtcblxuICAgIGFwcGx5Q29uc3RyYWludHMoaW1tZWRpYXRlbHk/OiBib29sZWFuKTogVmlld3BvcnQ7XG4gICAgZGVsdGFQaXhlbHNGcm9tUG9pbnRzKGRlbHRhUG9pbnRzOiBQb2ludCwgY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBkZWx0YVBpeGVsc0Zyb21Qb2ludHNOb1JvdGF0ZShkZWx0YVBvaW50czogUG9pbnQsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgZGVsdGFQb2ludHNGcm9tUGl4ZWxzKGRlbHRhUG9pbnRzOiBQb2ludCwgY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBkZWx0YVBvaW50c0Zyb21QaXhlbHNOb1JvdGF0ZShkZWx0YVBvaW50czogUG9pbnQsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgZW5zdXJlVmlzaWJsZShpbW1lZGlhdGVseT86IGJvb2xlYW4pOiBWaWV3cG9ydDtcbiAgICBmaXRCb3VuZHMoYm91bmRzOiBSZWN0LCBpbW1lZGlhdGVseT86IGJvb2xlYW4pOiBWaWV3cG9ydDtcbiAgICBmaXRCb3VuZHNXaXRoQ29uc3RyYWludHMoYm91bmRzOiBSZWN0LCBpbW1lZGlhdGVseT86IGJvb2xlYW4pOiBWaWV3cG9ydDtcbiAgICBmaXRIb3Jpem9udGFsbHkoaW1tZWRpYXRlbHk/OiBib29sZWFuKTogVmlld3BvcnQ7XG4gICAgZml0VmVydGljYWxseShpbW1lZGlhdGVseT86IGJvb2xlYW4pOiBWaWV3cG9ydDtcbiAgICBnZXRBc3BlY3RSYXRpbygpOiBhbnk7IC8vIFRPRE86IGRldGVybWluZSByZXR1cm4gdHlwZVxuICAgIGdldEJvdW5kcyhjdXJyZW50PzogYm9vbGVhbik6IFJlY3Q7XG4gICAgZ2V0Qm91bmRzTm9Sb3RhdGUoY3VycmVudD86IGJvb2xlYW4pOiBSZWN0O1xuICAgIGdldEJvdW5kc05vUm90YXRlV2l0aE1hcmdpbnMoY3VycmVudD86IGJvb2xlYW4pOiBSZWN0O1xuICAgIGdldEJvdW5kc1dpdGhNYXJnaW5zKGN1cnJlbnQ/OiBib29sZWFuKTogUmVjdDtcbiAgICBnZXRDZW50ZXIoY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBnZXRDb25zdHJhaW5lZEJvdW5kcyhjdXJyZW50PzogYm9vbGVhbik6IFZpZXdwb3J0O1xuICAgIGdldENvbnRhaW5lclNpemUoKTogUG9pbnQ7XG4gICAgZ2V0RmxpcCgpOiBib29sZWFuO1xuICAgIGdldEhvbWVCb3VuZHMoKTogUmVjdDtcbiAgICBnZXRIb21lQm91bmRzTm9Sb3RhdGUoKTogUmVjdDtcbiAgICBnZXRIb21lWm9vbSgpOiBudW1iZXI7XG4gICAgZ2V0TWFyZ2lucygpOiBvYmplY3Q7XG4gICAgZ2V0TWF4Wm9vbSgpOiBudW1iZXI7XG4gICAgZ2V0TWluWm9vbSgpOiBudW1iZXI7XG4gICAgZ2V0Um90YXRpb24oKTogbnVtYmVyO1xuICAgIGdldFpvb20oY3VycmVudD86IGJvb2xlYW4pOiBudW1iZXI7XG4gICAgZ29Ib21lKGltbWVkaWF0ZWx5PzogYm9vbGVhbik6IHZvaWQ7XG4gICAgaW1hZ2VUb1ZpZXdlckVsZW1lbnRDb29yZGluYXRlcyhwaXhlbDogUG9pbnQpOiBQb2ludDtcbiAgICBpbWFnZVRvVmlld3BvcnRDb29yZGluYXRlcyhwb3NpdGlvbjogUG9pbnQpOiBQb2ludDtcbiAgICBpbWFnZVRvVmlld3BvcnRDb29yZGluYXRlcyhpbWFnZVg6IG51bWJlciwgaW1hZ2VZOiBudW1iZXIpOiBQb2ludDtcbiAgICBpbWFnZVRvVmlld3BvcnRDb29yZGluYXRlcyhcbiAgICAgIGltYWdlWDogbnVtYmVyLFxuICAgICAgaW1hZ2VZOiBudW1iZXIsXG4gICAgICBwaXhlbFdpZHRoOiBudW1iZXIsXG4gICAgICBwaXhlbEhlaWdodDogbnVtYmVyXG4gICAgKTogUG9pbnQ7XG4gICAgaW1hZ2VUb1ZpZXdwb3J0UmVjdGFuZ2xlKFxuICAgICAgaW1hZ2VYOiBudW1iZXIgfCBSZWN0LFxuICAgICAgaW1hZ2VZPzogbnVtYmVyLFxuICAgICAgcGl4ZWxXaWR0aD86IG51bWJlcixcbiAgICAgIHBpeGVsSGVpZ2h0PzogbnVtYmVyXG4gICAgKTogUmVjdDtcbiAgICBpbWFnZVRvVmlld3BvcnRab29tKGltYWdlWm9vbTogbnVtYmVyKTogbnVtYmVyO1xuICAgIGltYWdlVG9XaW5kb3dDb29yZGluYXRlcyhwaXhlbDogUG9pbnQpOiBQb2ludDtcbiAgICBwYW5CeShkZWx0YTogUG9pbnQsIGltbWVkaWF0ZWx5PzogYm9vbGVhbik6IFZpZXdwb3J0O1xuICAgIHBhblRvKGNlbnRlcjogUG9pbnQsIGltbWVkaWF0ZWx5PzogYm9vbGVhbik6IFZpZXdwb3J0O1xuICAgIHBpeGVsRnJvbVBvaW50KHBvaW50OiBQb2ludCwgY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBwaXhlbEZyb21Qb2ludE5vUm90YXRlKHBvaW50OiBQb2ludCwgY3VycmVudD86IGJvb2xlYW4pOiBQb2ludDtcbiAgICBwb2ludEZyb21QaXhlbChwb2ludDogUG9pbnQsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgcG9pbnRGcm9tUGl4ZWxOb1JvdGF0ZShwb2ludDogUG9pbnQsIGN1cnJlbnQ/OiBib29sZWFuKTogUG9pbnQ7XG4gICAgcmVzZXRDb250ZW50U2l6ZShjb250ZW50U2l6ZTogUG9pbnQpOiBWaWV3cG9ydDtcbiAgICByZXNpemUoKTogVmlld3BvcnQ7XG4gICAgc2V0RmxpcChzdGF0ZTogYm9vbGVhbik6IFZpZXdwb3J0O1xuICAgIHNldE1hcmdpbnMobWFyZ2luczogb2JqZWN0KTogdm9pZDtcbiAgICBzZXRSb3RhdGlvbihkZWdyZWVzOiBudW1iZXIpOiBWaWV3cG9ydDtcbiAgICB0b2dnbGVGbGlwKCk6IFZpZXdwb3J0O1xuICAgIHVwZGF0ZSgpOiBib29sZWFuO1xuICAgIHZpZXdlckVsZW1lbnRUb0ltYWdlQ29vcmRpbmF0ZXMocGl4ZWw6IFBvaW50KTogUG9pbnQ7XG4gICAgdmlld2VyRWxlbWVudFRvVmlld3BvcnRDb29yZGluYXRlcyhwaXhlbDogUG9pbnQpOiBQb2ludDtcbiAgICB2aWV3ZXJFbGVtZW50VG9WaWV3cG9ydFJlY3RhbmdsZShyZWN0YW5nbGU6IFJlY3QpOiBSZWN0O1xuICAgIHZpZXdwb3J0VG9JbWFnZUNvb3JkaW5hdGVzKHBvc2l0aW9uOiBQb2ludCk6IFBvaW50O1xuICAgIHZpZXdwb3J0VG9JbWFnZUNvb3JkaW5hdGVzKHZpZXdlclg6IG51bWJlciwgdmlld2VyWTogbnVtYmVyKTogUG9pbnQ7XG4gICAgdmlld3BvcnRUb0ltYWdlUmVjdGFuZ2xlKHJlY3RhbmdsZTogUmVjdCk6IFJlY3Q7XG4gICAgdmlld3BvcnRUb0ltYWdlUmVjdGFuZ2xlKFxuICAgICAgdmlld2VyWDogbnVtYmVyLFxuICAgICAgdmlld2VyWTogbnVtYmVyLFxuICAgICAgcG9pbnRXaWR0aDogbnVtYmVyLFxuICAgICAgcG9pbnRIZWlnaHQ6IG51bWJlclxuICAgICk6IFJlY3Q7XG4gICAgdmlld3BvcnRUb0ltYWdlWm9vbSh2aWV3cG9ydFpvb206IG51bWJlcik6IG51bWJlcjtcbiAgICB2aWV3cG9ydFRvVmlld2VyRWxlbWVudENvb3JkaW5hdGVzKHBvaW50OiBQb2ludCk6IFBvaW50O1xuICAgIHZpZXdwb3J0VG9WaWV3ZXJFbGVtZW50UmVjdGFuZ2xlKHJlY3RhbmdsZTogUmVjdCk6IFJlY3Q7XG4gICAgdmlld3BvcnRUb1dpbmRvd0Nvb3JkaW5hdGVzKHBvaW50OiBQb2ludCk6IFBvaW50O1xuICAgIHdpbmRvd1RvSW1hZ2VDb29yZGluYXRlcyhwaXhlbDogUG9pbnQpOiBQb2ludDtcbiAgICB3aW5kb3dUb1ZpZXdwb3J0Q29vcmRpbmF0ZXMocGl4ZWw6IFBvaW50KTogUG9pbnQ7XG4gICAgem9vbUJ5KGZhY3RvcjogbnVtYmVyLCByZWZQb2ludD86IFBvaW50LCBpbW1lZGlhdGVseT86IGJvb2xlYW4pOiBWaWV3cG9ydDtcbiAgICB6b29tVG8oZmFjdG9yOiBudW1iZXIsIHJlZlBvaW50PzogUG9pbnQsIGltbWVkaWF0ZWx5PzogYm9vbGVhbik6IFZpZXdwb3J0O1xuICB9XG5cbiAgY2xhc3MgV29ybGQgZXh0ZW5kcyBFdmVudFNvdXJjZSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogb2JqZWN0KTtcblxuICAgIGFkZEhhbmRsZXIoXG4gICAgICBldmVudE5hbWU6IFdvcmxkRXZlbnROYW1lLFxuICAgICAgY2FsbGJhY2s6IEV2ZW50SGFuZGxlcjxXb3JsZEV2ZW50PixcbiAgICAgIHVzZXJEYXRhPzogb2JqZWN0XG4gICAgKTogdm9pZDtcbiAgICBhZGRJdGVtKGl0ZW06IFRpbGVkSW1hZ2UsIG9wdGlvbnM/OiB7IGluZGV4PzogbnVtYmVyIH0pOiB2b2lkO1xuICAgIGFkZE9uY2VIYW5kbGVyKFxuICAgICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXI8V29ybGRFdmVudD4sXG4gICAgICB1c2VyRGF0YT86IG9iamVjdCxcbiAgICAgIHRpbWVzPzogbnVtYmVyXG4gICAgKTogdm9pZDtcbiAgICBhcnJhbmdlKG9wdGlvbnM6IHtcbiAgICAgIGltbWVkaWF0ZWx5PzogYm9vbGVhbjtcbiAgICAgIGxheW91dD86ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCc7XG4gICAgICByb3dzPzogbnVtYmVyO1xuICAgICAgY29sdW1ucz86IG51bWJlcjtcbiAgICAgIHRpbGVTaXplPzogbnVtYmVyO1xuICAgICAgdGlsZU1hcmdpbj86IG51bWJlcjtcbiAgICB9KTogdm9pZDtcbiAgICBkcmF3KCk6IHZvaWQ7XG4gICAgZ2V0Q29udGVudEZhY3RvcigpOiBudW1iZXI7XG4gICAgZ2V0SGFuZGxlcihldmVudE5hbWU6IHN0cmluZyk6IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG4gICAgZ2V0SG9tZUJvdW5kcygpOiBSZWN0O1xuICAgIGdldEluZGV4T2ZJdGVtKGl0ZW06IFRpbGVkSW1hZ2UpOiBudW1iZXI7XG4gICAgZ2V0SXRlbUF0KGlkOiBudW1iZXIpOiBUaWxlZEltYWdlO1xuICAgIGdldEl0ZW1Db3VudCgpOiBudW1iZXI7XG4gICAgbmVlZHNEcmF3KCk6IGJvb2xlYW47XG4gICAgcmFpc2VFdmVudChldmVudE5hbWU6IHN0cmluZywgZXZlbnRBcmdzPzogb2JqZWN0KTogdm9pZDtcbiAgICByZW1vdmVBbGwoKTogdm9pZDtcbiAgICByZW1vdmVBbGxIYW5kbGVycyhldmVudE5hbWU6IHN0cmluZyk6IHZvaWQ7XG4gICAgcmVtb3ZlSGFuZGxlcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRXZlbnRIYW5kbGVyPFdvcmxkRXZlbnQ+KTogdm9pZDtcbiAgICByZW1vdmVJdGVtKGl0ZW06IFRpbGVkSW1hZ2UpOiB2b2lkO1xuICAgIHJlc2V0SXRlbXMoKTogdm9pZDtcbiAgICBzZXRBdXRvUmVmaWd1cmVTaXplcyh2YWx1ZT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIHNldEl0ZW1JbmRleChpdGVtOiBUaWxlZEltYWdlLCBpbmRleDogbnVtYmVyKTogdm9pZDtcbiAgICB1cGRhdGUoKTogdm9pZDtcbiAgfVxuXG4gIGNsYXNzIFpvb21pZnlUaWxlU291cmNlIGV4dGVuZHMgVGlsZVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHRpbGVTaXplOiBudW1iZXIsIHRpbGVzVXJsOiBzdHJpbmcpO1xuICB9XG5cbiAgLy8gVE9ETzogdXNlIHByb3BlciBldmVudE5hbWUgdHlwZSBhbGlhc2VzLCBhbmQgT1NERXZlbnQgd2hlcmUgYXBwcm9waWF0ZVxuXG4gIHR5cGUgRXZlbnRIYW5kbGVyPFQgZXh0ZW5kcyBPU0RFdmVudDxhbnk+PiA9IChldmVudDogVCkgPT4gdm9pZDtcblxuICB0eXBlIEJ1dHRvbkV2ZW50TmFtZSA9ICdibHVyJyB8ICdjbGljaycgfCAnZW50ZXInIHwgJ2V4aXQnIHwgJ2ZvY3VzJyB8ICdwcmVzcycgfCAncmVsZWFzZSc7XG4gIHR5cGUgVGlsZWRJbWFnZUV2ZW50TmFtZSA9XG4gICAgfCAnYm91bmRzLWNoYW5nZSdcbiAgICB8ICdjbGlwLWNoYW5nZSdcbiAgICB8ICdjb21wb3NpdGUtb3BlcmF0aW9uLWNoYW5nZSdcbiAgICB8ICdmdWxseS1sb2FkZWQtY2hhbmdlJ1xuICAgIHwgJ29wYWNpdHktY2hhbmdlJztcbiAgdHlwZSBUaWxlU291cmNlRXZlbnRuYW1lID0gJ29wZW4tZmFpbGVkJyB8ICdyZWFkeSc7XG4gIHR5cGUgVmlld2VyRXZlbnROYW1lID1cbiAgICB8ICdhZGQtaXRlbS1mYWlsZWQnXG4gICAgfCAnYWRkLW92ZXJsYXknXG4gICAgfCAnYW5pbWF0aW9uJ1xuICAgIHwgJ2FuaW1hdGlvbi1maW5pc2gnXG4gICAgfCAnYW5pbWF0aW9uLXN0YXJ0J1xuICAgIHwgJ2NhbnZhcy1jbGljaydcbiAgICB8ICdjYW52YXMtZG91YmxlLWNsaWNrJ1xuICAgIHwgJ2NhbnZhcy1kcmFnJ1xuICAgIHwgJ2NhbnZhcy1kcmFnLWVuZCdcbiAgICB8ICdjYW52YXMtZW50ZXInXG4gICAgfCAnY2FudmFzLWV4aXQnXG4gICAgfCAnY2FudmFzLWtleSdcbiAgICB8ICdjYW52YXMtbm9ucHJpbWFyeS1wcmVzcydcbiAgICB8ICdjYW52YXMtbm9ucHJpbWFyeS1yZWxlYXNlJ1xuICAgIHwgJ2NhbnZhcy1waW5jaCdcbiAgICB8ICdjYW52YXMtcHJlc3MnXG4gICAgfCAnY2FudmFzLXJlbGVhc2UnXG4gICAgfCAnY2FudmFzLXNjcm9sbCdcbiAgICB8ICdjbGVhci1vdmVybGF5J1xuICAgIHwgJ2Nsb3NlJ1xuICAgIHwgJ2NvbnN0cmFpbidcbiAgICB8ICdjb250YWluZXItZW50ZXInXG4gICAgfCAnY29udGFpbmVyLWV4aXQnXG4gICAgfCAnY29udHJvbHMtZW5hYmxlZCdcbiAgICB8ICdmbGlwJ1xuICAgIHwgJ2Z1bGwtcGFnZSdcbiAgICB8ICdmdWxsLXNjcmVlbidcbiAgICB8ICdob21lJ1xuICAgIHwgJ21vdXNlLWVuYWJsZWQnXG4gICAgfCAnbmF2aWdhdG9yLWNsaWNrJ1xuICAgIHwgJ25hdmlnYXRvci1kcmFnJ1xuICAgIHwgJ25hdmlnYXRvci1zY3JvbGwnXG4gICAgfCAnb3BlbidcbiAgICB8ICdvcGVuLWZhaWxlZCdcbiAgICB8ICdwYWdlJ1xuICAgIHwgJ3BhbidcbiAgICB8ICdwcmUtZnVsbC1wYWdlJ1xuICAgIHwgJ3ByZS1mdWxsLXNjcmVlbidcbiAgICB8ICdyZW1vdmUtb3ZlcmxheSdcbiAgICB8ICdyZXNldC1zaXplJ1xuICAgIHwgJ3Jlc2l6ZSdcbiAgICB8ICdyb3RhdGUnXG4gICAgfCAndGlsZS1kcmF3aW5nJ1xuICAgIHwgJ3RpbGUtZHJhd24nXG4gICAgfCAndGlsZS1sb2FkLWZhaWxlZCdcbiAgICB8ICd0aWxlLWxvYWRlZCdcbiAgICB8ICd0aWxlLXVubG9hZGVkJ1xuICAgIHwgJ3VwZGF0ZS1sZXZlbCdcbiAgICB8ICd1cGRhdGUtb3ZlcmxheSdcbiAgICB8ICd1cGRhdGUtdGlsZSdcbiAgICB8ICd1cGRhdGUtdmlld3BvcnQnXG4gICAgfCAndmlld3BvcnQtY2hhbmdlJ1xuICAgIHwgJ3Zpc2libGUnXG4gICAgfCAnem9vbSc7XG4gIHR5cGUgV29ybGRFdmVudE5hbWUgPSAnYWRkLWl0ZW0nIHwgJ2l0ZW0taW5kZXgtY2hhbmdlJyB8ICdtZXRyaWNzLWNoYW5nZScgfCAncmVtb3ZlLWl0ZW0nO1xuXG4gIGludGVyZmFjZSBPU0RFdmVudDxUPiBleHRlbmRzIEV2ZW50IHtcbiAgICBldmVudFNvdXJjZT86IFQ7XG4gICAgdXNlckRhdGE6IGFueTtcbiAgfVxuXG4gIGludGVyZmFjZSBCdXR0b25FdmVudCBleHRlbmRzIE9TREV2ZW50PEJ1dHRvbj4ge1xuICAgIG9yaWdpbmFsRXZlbnQ6IEV2ZW50O1xuICB9XG5cbiAgaW50ZXJmYWNlIFRpbGVkSW1hZ2VFdmVudCBleHRlbmRzIE9TREV2ZW50PFRpbGVkSW1hZ2U+IHtcbiAgICBjb21wb3NpdGVPcGVyYXRpb25DaGFuZ2U/OiBzdHJpbmc7XG4gICAgZnVsbHlMb2FkZWQ/OiBib29sZWFuO1xuICAgIG9wYWNpdHk/OiBib29sZWFuO1xuICB9XG5cbiAgaW50ZXJmYWNlIFRpbGVTb3VyY2VFdmVudCBleHRlbmRzIE9TREV2ZW50PFRpbGVTb3VyY2U+IHtcbiAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgIHNvdXJjZT86IHN0cmluZztcbiAgICB0aWxlU291cmNlPzogb2JqZWN0O1xuICB9XG5cbiAgaW50ZXJmYWNlIFZpZXdlckV2ZW50IGV4dGVuZHMgT1NERXZlbnQ8Vmlld2VyPiB7XG4gICAgbWVzc2FnZT86IHN0cmluZztcbiAgICBzb3VyY2U/OiBzdHJpbmc7XG4gICAgb3B0aW9ucz86IG9iamVjdDtcbiAgICBlbGVtZW50PzogRWxlbWVudDtcbiAgICBsb2NhdGlvbj86IFBvaW50IHwgUmVjdDtcbiAgICBwbGFjZW1lbnQ/OiBQbGFjZW1lbnQ7XG4gICAgdHJhY2tlcj86IE1vdXNlVHJhY2tlcjtcbiAgICBwb3NpdGlvbj86IFBvaW50O1xuICAgIHF1aWNrPzogYm9vbGVhbjtcbiAgICBzaGlmdD86IGJvb2xlYW47XG4gICAgcHJldmVudERlZmF1bHRBY3Rpb24/OiB0cnVlO1xuICAgIGRlbHRhPzogUG9pbnQ7XG4gICAgc3BlZWQ/OiBudW1iZXI7XG4gICAgZGlyZWN0aW9uPzogbnVtYmVyO1xuICAgIHBvaW50ZXJUeXBlPzogc3RyaW5nO1xuICAgIGJ1dHRvbj86IG51bWJlcjtcbiAgICBidXR0b25zPzogbnVtYmVyO1xuICAgIHBvaW50ZXJzPzogbnVtYmVyO1xuICAgIGluc2lkZUVsZW1lbnRQcmVzc2VkPzogYm9vbGVhbjtcbiAgICBidXR0b25Eb3duQW55PzogYm9vbGVhbjtcbiAgICBwcmV2ZW50VmVydGljYWxQYW4/OiBib29sZWFuO1xuICAgIHByZXZlbnRIb3Jpem9udGFsUGFuPzogYm9vbGVhbjtcbiAgICBnZXN0dXJlUG9pbnRzPzogR2VzdHVyZVBvaW50W107XG4gICAgbGFzdENlbnRlcj86IFBvaW50O1xuICAgIGNlbnRlcj86IFBvaW50O1xuICAgIGxhc3REaXN0YW5jZT86IG51bWJlcjtcbiAgICBpbnNpZGVFbGVtZW50UmVsZWFzZWQ/OiBib29sZWFuO1xuICAgIHNjcm9sbD86IG51bWJlcjtcbiAgICBpbW1lZGlhdGVseT86IG51bWJlcjtcbiAgICBlbmFibGVkPzogYm9vbGVhbjtcbiAgICBmbGlwcGVkPzogbnVtYmVyO1xuICAgIGZ1bGxQYWdlPzogYm9vbGVhbjtcbiAgICBmdWxsU2NyZWVuPzogYm9vbGVhbjtcbiAgICBwYWdlPzogbnVtYmVyO1xuICAgIGNvbnRlbnRTaXplPzogUG9pbnQ7XG4gICAgY29udGVudEJvdW5kcz86IFJlY3Q7XG4gICAgaG9tZUJvdW5kcz86IFJlY3Q7XG4gICAgY29udGVudEZhY3Rvcj86IG51bWJlcjtcbiAgICBuZXdDb250YWluZXJTaXplPzogUG9pbnQ7XG4gICAgbWFudGFpbj86IGJvb2xlYW47XG4gICAgZGVncmVlcz86IG51bWJlcjtcbiAgICB0aWxlPzogVGlsZTtcbiAgICB0aWxlZEltYWdlPzogVGlsZWRJbWFnZSB8IFhNTEh0dHBSZXF1ZXN0O1xuICAgIGNvbnRleHQ/OiBUaWxlO1xuICAgIHJlbmRlcmVkPzogVGlsZTtcbiAgICB0aW1lPzogbnVtYmVyO1xuICAgIHRpbGVSZXF1ZXN0PzogWE1MSHR0cFJlcXVlc3Q7XG4gICAgZ2V0Q29tcGxldGlvbkNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueSkgPT4gdm9pZDtcbiAgICB2aXNpYmxlPzogYm9vbGVhbjtcbiAgICByZWZQb2ludD86IFBvaW50O1xuICAgIHpvb20/OiBudW1iZXI7XG4gIH1cblxuICBpbnRlcmZhY2UgV29ybGRFdmVudCBleHRlbmRzIE9TREV2ZW50PFdvcmxkPiB7XG4gICAgaXRlbT86IFRpbGVkSW1hZ2U7XG4gICAgcHJldmlvdXNJbmRleD86IG51bWJlcjtcbiAgICBuZXdJbmRleD86IG51bWJlcjtcbiAgfVxufVxuXG4vLyBDdXN0b20gdHlwZSBuZWVkZWQgZm9yIGltcG9ydGluZyB0eXBlcyBkYXRhIHdpdGhvdXQgaGF2aW5nIHRvIGltcG9ydCB0aGUgYWN0dWFsIEpTXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5TZWFkcmFnb25UeXBlIHtcbiAgKG9wdGlvbnM6IE9wZW5TZWFkcmFnb24uT3B0aW9ucyk6IE9wZW5TZWFkcmFnb24uVmlld2VyO1xuICBSZWN0OiB0eXBlb2YgT3BlblNlYWRyYWdvbi5SZWN0O1xufVxuXG5leHBvcnQgdHlwZSBWaWV3ZXJUeXBlID0gT3BlblNlYWRyYWdvbi5WaWV3ZXI7XG4iXX0="}